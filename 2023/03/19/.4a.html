<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Unit 2.4a Using Programs with Data, SQLAlchemy | fastpages</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Unit 2.4a Using Programs with Data, SQLAlchemy" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Using Programs with Data is focused on SQL and database actions. Part A focuses on SQLAlchemy and an OOP programming style," />
<meta property="og:description" content="Using Programs with Data is focused on SQL and database actions. Part A focuses on SQLAlchemy and an OOP programming style," />
<link rel="canonical" href="https://rohanagr.github.io/RohanRepository/2023/03/19/.4a.html" />
<meta property="og:url" content="https://rohanagr.github.io/RohanRepository/2023/03/19/.4a.html" />
<meta property="og:site_name" content="fastpages" />
<meta property="og:image" content="https://rohanagr.github.io/RohanRepository/images/python.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-03-19T00:00:00-05:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://rohanagr.github.io/RohanRepository/images/python.png" />
<meta property="twitter:title" content="Unit 2.4a Using Programs with Data, SQLAlchemy" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-03-19T00:00:00-05:00","datePublished":"2023-03-19T00:00:00-05:00","description":"Using Programs with Data is focused on SQL and database actions. Part A focuses on SQLAlchemy and an OOP programming style,","headline":"Unit 2.4a Using Programs with Data, SQLAlchemy","image":"https://rohanagr.github.io/RohanRepository/images/python.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://rohanagr.github.io/RohanRepository/2023/03/19/.4a.html"},"url":"https://rohanagr.github.io/RohanRepository/2023/03/19/.4a.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/RohanRepository/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://rohanagr.github.io/RohanRepository/feed.xml" title="fastpages" /><link rel="shortcut icon" type="image/x-icon" href="/RohanRepository/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/RohanRepository/">fastpages</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/RohanRepository/about/">About Me</a><a class="page-link" href="/RohanRepository/vocabulary/">Vocabulary</a><a class="page-link" href="/RohanRepository/notes/">Other Class Notes</a><a class="page-link" href="/RohanRepository/categories/">Tags</a><a class="page-link" href="/RohanRepository/search/">Search</a><a class="page-link" href="/RohanRepository/JavaScript">JavaScript</a><a class="page-link" href="/RohanRepository/algorithmvocabulary/">Trimester 2 Algorithm Vocabulary</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Unit 2.4a Using Programs with Data, SQLAlchemy</h1><p class="page-description">Using Programs with Data is focused on SQL and database actions.  Part A focuses on SQLAlchemy and an OOP programming style,</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2023-03-19T00:00:00-05:00" itemprop="datePublished">
        Mar 19, 2023
      </time>
       â€¢ <span class="read-time" title="Estimated read time">
    
    
      34 min read
    
</span></p>

    

    
      
        <div class="pb-5 d-flex flex-justify-center">
          <div class="px-2">

    <a href="https://github.com/RohanAgr/RohanRepository/tree/master/_notebooks/2023-3-20-2.4a.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/RohanRepository/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/RohanAgr/RohanRepository/master?filepath=_notebooks%2F2023-3-20-2.4a.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/RohanRepository/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/RohanAgr/RohanRepository/blob/master/_notebooks/2023-3-20-2.4a.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/RohanRepository/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
          <div class="px-2">
  <a href="https://deepnote.com/launch?url=https%3A%2F%2Fgithub.com%2FRohanAgr%2FRohanRepository%2Fblob%2Fmaster%2F_notebooks%2F2023-3-20-2.4a.ipynb" target="_blank">
      <img class="notebook-badge-image" src="/RohanRepository/assets/badges/deepnote.svg" alt="Launch in Deepnote"/>
  </a>
</div>

        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h1"><a href="#Database-and-SQLAlchemy">Database and SQLAlchemy </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Imports-and-Flask-Objects">Imports and Flask Objects </a></li>
<li class="toc-entry toc-h2"><a href="#Model-Definition">Model Definition </a></li>
<li class="toc-entry toc-h2"><a href="#Initial-Data">Initial Data </a></li>
<li class="toc-entry toc-h2"><a href="#Check-for-given-Credentials-in-users-table-in-sqlite.db">Check for given Credentials in users table in sqlite.db </a></li>
<li class="toc-entry toc-h2"><a href="#Create-a-new-User-in-table-in-Sqlite.db">Create a new User in table in Sqlite.db </a></li>
<li class="toc-entry toc-h2"><a href="#Reading-users-table-in-sqlite.db">Reading users table in sqlite.db </a></li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#Hacks">Hacks </a></li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2023-3-20-2.4a.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Database-and-SQLAlchemy">
<a class="anchor" href="#Database-and-SQLAlchemy" aria-hidden="true"><span class="octicon octicon-link"></span></a>Database and SQLAlchemy<a class="anchor-link" href="#Database-and-SQLAlchemy"> </a>
</h1>
<blockquote>
<p>In this blog we will explore using programs with data, focused on Databases.  We will use SQLite Database to learn more about using Programs with Data.  <strong><em>Use Debugging through these examples to examine Objects created in Code</em></strong>.</p>
</blockquote>
<ul>
<li>
<p>College Board talks about ideas like</p>
<ul>
<li>Program Usage. "iterative and interactive way when processing information"</li>
<li>Managing Data.  "classifying data are part of the process in using programs", "data files in a Table"</li>
<li>Insight "insight and knowledge can be obtained from ...  digitally represented information"</li>
<li>Filter systems. 'tools for finding information and recognizing patterns"</li>
<li>Application. "the preserve has two databases", "an employee wants to count the number of book"</li>
</ul>
</li>
<li>
<p>PBL, Databases, Iterative/OOP</p>
<ul>
<li>Iterative. Refers to a sequence of instructions or code being repeated until a specific end result is achieved</li>
<li>OOP. A computer programming model that organizes software design around data, or objects, rather than functions and logic</li>
<li>SQL. Structured Query Language, abbreviated as SQL, is a language used in programming, managing, and structuring data </li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Imports-and-Flask-Objects">
<a class="anchor" href="#Imports-and-Flask-Objects" aria-hidden="true"><span class="octicon octicon-link"></span></a>Imports and Flask Objects<a class="anchor-link" href="#Imports-and-Flask-Objects"> </a>
</h2>
<blockquote>
<p>Defines and key object creations</p>
</blockquote>
<ul>
<li>Comment on where you have observed these working?  Provide a defintion of purpose.<ol>
<li>Flask app object</li>
<li>SQLAlchemy db object</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">"""</span>
<span class="sd">These imports define the key objects</span>
<span class="sd">"""</span>

<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>

<span class="sd">"""</span>
<span class="sd">These object and definitions are used throughout the Jupyter Notebook.</span>
<span class="sd">"""</span>

<span class="c1"># Setup of key Flask object (app)</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="c1"># Setup SQLAlchemy object and properties for the database (db)</span>
<span class="n">database</span> <span class="o">=</span> <span class="s1">'sqlite:///sqlite.db'</span>  <span class="c1"># path and filename of database</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">'SQLALCHEMY_TRACK_MODIFICATIONS'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">'SQLALCHEMY_DATABASE_URI'</span><span class="p">]</span> <span class="o">=</span> <span class="n">database</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">'SECRET_KEY'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'SECRET_KEY'</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">()</span>



<span class="c1"># This belongs in place where it runs once per project</span>
<span class="n">db</span><span class="o">.</span><span class="n">init_app</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">""" database dependencies to support sqlite examples """</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">sqlalchemy.exc</span> <span class="kn">import</span> <span class="n">IntegrityError</span>

<span class="sd">''' Tutorial: https://www.sqlalchemy.org/library.html#tutorials, try to get into a Python shell and follow along '''</span>

<span class="c1"># Define the User class to manage actions in the 'users' table</span>
<span class="c1"># -- Object Relational Mapping (ORM) is the key concept of SQLAlchemy</span>
<span class="c1"># -- a.) db.Model is like an inner layer of the onion in ORM</span>
<span class="c1"># -- b.) User represents data we want to store, something that is built on db.Model</span>
<span class="c1"># -- c.) SQLAlchemy ORM is layer on top of SQLAlchemy Core, then SQLAlchemy engine, SQL</span>
<span class="k">class</span> <span class="nc">MLB</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">'MLB'</span>  <span class="c1"># table name is plural, class name is singular</span>

    <span class="c1"># Define the User schema with "vars" from object</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_uid</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_position</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_team</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_number</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># constructor of a User object, initializes the instance variables within object (self)</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">team</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>    <span class="c1"># variables with self prefix become part of the object, </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_uid</span> <span class="o">=</span> <span class="n">uid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_team</span> <span class="o">=</span> <span class="n">team</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_number</span> <span class="o">=</span> <span class="n">number</span>

    <span class="c1"># a name getter method, extracts name from object</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
    
    <span class="c1"># a setter function, allows name to be updated after initial object creation</span>
    <span class="nd">@name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
    
    <span class="c1"># a getter method, extracts uid from object</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">uid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uid</span>
    
    <span class="c1"># a setter function, allows uid to be updated after initial object creation</span>
    <span class="nd">@uid</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">uid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uid</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_uid</span> <span class="o">=</span> <span class="n">uid</span>
        
    <span class="c1"># check if uid parameter matches user id in object, return boolean</span>
    <span class="k">def</span> <span class="nf">is_uid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uid</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uid</span> <span class="o">==</span> <span class="n">uid</span>
    
    <span class="c1"># a getter method, extracts mascot from object</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span>
    
    <span class="c1"># a setter function, allows mascot to be updated after initial object creation</span>
    <span class="nd">@position</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">mascot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">position</span>

    <span class="c1"># a getter method, extracts car from object</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">team</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_team</span>

    <span class="c1"># a setter function, allows car to be updated after initial object creation</span>
    <span class="nd">@team</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">team</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">team</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_team</span> <span class="o">=</span> <span class="n">team</span>
    
    <span class="c1"># a getter method, extracts mile from object</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number</span>
    
    <span class="c1"># a setter function, allows car to be updated after initial object creation</span>
    <span class="nd">@number</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_number</span> <span class="o">=</span> <span class="n">number</span>
    
    <span class="c1"># output content using str(object) is in human readable form</span>
    <span class="c1"># output content using json dumps, this is ready for API response</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    <span class="c1"># CRUD create/add a new record to the table</span>
    <span class="c1"># returns self or None on error</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># creates a person object from User(db.Model) class, passes initializers</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># add prepares to persist person object to Users table</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>  <span class="c1"># SqlAlchemy "unit of work pattern" requires a manual commit</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">:</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># CRUD read converts self to dictionary</span>
    <span class="c1"># returns dictionary</span>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">"uid"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">uid</span><span class="p">,</span>
            <span class="s2">"position"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">,</span>
            <span class="s2">"team"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">team</span><span class="p">,</span>
            <span class="s2">"number"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="c1"># CRUD update: updates user name, car, phone</span>
    <span class="c1"># returns self</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">team</span><span class="o">=</span><span class="s2">""</span><span class="p">):</span>
        <span class="sd">"""only updates values with length"""</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uid</span> <span class="o">=</span> <span class="n">uid</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">position</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">team</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_team</span> <span class="o">=</span> <span class="n">team</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="c1"># CRUD delete: remove self</span>
    <span class="c1"># None</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We first import the flask and then import SQLAlchemy. This will set us up for the other code cells which follow. 
We define the app, the database, and how we want to configure it. 
This is seen in the app = Flask(<strong>name</strong>) command, database = 'sqlite:///files/sqlite.db', and all the app.config commands.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Model-Definition">
<a class="anchor" href="#Model-Definition" aria-hidden="true"><span class="octicon octicon-link"></span></a>Model Definition<a class="anchor-link" href="#Model-Definition"> </a>
</h2>
<blockquote>
<p>Define columns, initialization, and CRUD methods for users table in sqlite.db</p>
</blockquote>
<ul>
<li>Comment on these items in the class, purpose and defintion.<ul>
<li>class User</li>
<li>db.Model inheritance</li>
<li>
<em>init</em> method</li>
<li>
<code>@property</code>, <code>@&lt;column&gt;.setter</code>
</li>
<li>create, read, update, delete methods</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">""" database dependencies to support sqlite examples """</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="kn">from</span> <span class="nn">sqlalchemy.exc</span> <span class="kn">import</span> <span class="n">IntegrityError</span>

<span class="sd">''' Tutorial: https://www.sqlalchemy.org/library.html#tutorials, try to get into a Python shell and follow along '''</span>

<span class="c1"># Define the User class to manage actions in the 'users' table</span>
<span class="c1"># -- Object Relational Mapping (ORM) is the key concept of SQLAlchemy</span>
<span class="c1"># -- a.) db.Model is like an inner layer of the onion in ORM</span>
<span class="c1"># -- b.) User represents data we want to store, something that is built on db.Model</span>
<span class="c1"># -- c.) SQLAlchemy ORM is layer on top of SQLAlchemy Core, then SQLAlchemy engine, SQL</span>
<span class="k">class</span> <span class="nc">MLB</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">'MLB'</span>  <span class="c1"># table name is plural, class name is singular</span>

    <span class="c1"># Define the User schema with "vars" from object</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_uid</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_position</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_team</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">_number</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># constructor of a User object, initializes the instance variables within object (self)</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">team</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>    <span class="c1"># variables with self prefix become part of the object, </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_uid</span> <span class="o">=</span> <span class="n">uid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_team</span> <span class="o">=</span> <span class="n">team</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_number</span> <span class="o">=</span> <span class="n">number</span>

    <span class="c1"># a name getter method, extracts name from object</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
    
    <span class="c1"># a setter function, allows name to be updated after initial object creation</span>
    <span class="nd">@name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
    
    <span class="c1"># a getter method, extracts uid from object</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">uid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uid</span>
    
    <span class="c1"># a setter function, allows uid to be updated after initial object creation</span>
    <span class="nd">@uid</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">uid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uid</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_uid</span> <span class="o">=</span> <span class="n">uid</span>
        
    <span class="c1"># check if uid parameter matches user id in object, return boolean</span>
    <span class="k">def</span> <span class="nf">is_uid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uid</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_uid</span> <span class="o">==</span> <span class="n">uid</span>
    
    <span class="c1"># a getter method, extracts mascot from object</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_position</span>
    
    <span class="c1"># a setter function, allows mascot to be updated after initial object creation</span>
    <span class="nd">@position</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">mascot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">position</span>

    <span class="c1"># a getter method, extracts car from object</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">team</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_team</span>

    <span class="c1"># a setter function, allows car to be updated after initial object creation</span>
    <span class="nd">@team</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">team</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">team</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_team</span> <span class="o">=</span> <span class="n">team</span>
    
    <span class="c1"># a getter method, extracts mile from object</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number</span>
    
    <span class="c1"># a setter function, allows car to be updated after initial object creation</span>
    <span class="nd">@number</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_number</span> <span class="o">=</span> <span class="n">number</span>
    
    <span class="c1"># output content using str(object) is in human readable form</span>
    <span class="c1"># output content using json dumps, this is ready for API response</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    <span class="c1"># CRUD create/add a new record to the table</span>
    <span class="c1"># returns self or None on error</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># creates a person object from User(db.Model) class, passes initializers</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># add prepares to persist person object to Users table</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>  <span class="c1"># SqlAlchemy "unit of work pattern" requires a manual commit</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">:</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># CRUD read converts self to dictionary</span>
    <span class="c1"># returns dictionary</span>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">"uid"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">uid</span><span class="p">,</span>
            <span class="s2">"position"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">,</span>
            <span class="s2">"team"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">team</span><span class="p">,</span>
            <span class="s2">"number"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="c1"># CRUD update: updates user name, car, phone</span>
    <span class="c1"># returns self</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">team</span><span class="o">=</span><span class="s2">""</span><span class="p">):</span>
        <span class="sd">"""only updates values with length"""</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uid</span> <span class="o">=</span> <span class="n">uid</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">position</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">team</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_team</span> <span class="o">=</span> <span class="n">team</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="c1"># CRUD delete: remove self</span>
    <span class="c1"># None</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span>
    
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">InvalidRequestError</span>                       Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb Cell 8</span> in <span class="ansi-cyan-fg">&lt;cell line: 15&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#W6sdnNjb2RlLXJlbW90ZQ%3D%3D?line=7'&gt;8&lt;/a&gt;</span> ''' Tutorial: https://www.sqlalchemy.org/library.html#tutorials, try to get into a Python shell and follow along '''
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#W6sdnNjb2RlLXJlbW90ZQ%3D%3D?line=9'&gt;10&lt;/a&gt;</span> # Define the User class to manage actions in the 'users' table
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#W6sdnNjb2RlLXJlbW90ZQ%3D%3D?line=10'&gt;11&lt;/a&gt;</span> # -- Object Relational Mapping (ORM) is the key concept of SQLAlchemy
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#W6sdnNjb2RlLXJlbW90ZQ%3D%3D?line=11'&gt;12&lt;/a&gt;</span> # -- a.) db.Model is like an inner layer of the onion in ORM
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#W6sdnNjb2RlLXJlbW90ZQ%3D%3D?line=12'&gt;13&lt;/a&gt;</span> # -- b.) User represents data we want to store, something that is built on db.Model
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#W6sdnNjb2RlLXJlbW90ZQ%3D%3D?line=13'&gt;14&lt;/a&gt;</span> # -- c.) SQLAlchemy ORM is layer on top of SQLAlchemy Core, then SQLAlchemy engine, SQL
<span class="ansi-green-fg">---&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#W6sdnNjb2RlLXJlbW90ZQ%3D%3D?line=14'&gt;15&lt;/a&gt;</span> class MLB(db.Model):
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#W6sdnNjb2RlLXJlbW90ZQ%3D%3D?line=15'&gt;16&lt;/a&gt;</span>     __tablename__ = 'MLB'  # table name is plural, class name is singular
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#W6sdnNjb2RlLXJlbW90ZQ%3D%3D?line=17'&gt;18&lt;/a&gt;</span>     # Define the User schema with "vars" from object

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/flask_sqlalchemy/model.py:100</span>, in <span class="ansi-cyan-fg">BindMetaMixin.__init__</span><span class="ansi-blue-fg">(cls, name, bases, d, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">     97</span>     if metadata is not parent_metadata:
<span class="ansi-green-intense-fg ansi-bold">     98</span>         cls.metadata = metadata
<span class="ansi-green-fg">--&gt; 100</span> super().__init__(name, bases, d, **kwargs)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/flask_sqlalchemy/model.py:120</span>, in <span class="ansi-cyan-fg">NameMetaMixin.__init__</span><span class="ansi-blue-fg">(cls, name, bases, d, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    117</span> if should_set_tablename(cls):
<span class="ansi-green-intense-fg ansi-bold">    118</span>     cls.__tablename__ = camel_to_snake_case(cls.__name__)
<span class="ansi-green-fg">--&gt; 120</span> super().__init__(name, bases, d, **kwargs)
<span class="ansi-green-intense-fg ansi-bold">    122</span> # __table_cls__ has run. If no table was created, use the parent table.
<span class="ansi-green-intense-fg ansi-bold">    123</span> if (
<span class="ansi-green-intense-fg ansi-bold">    124</span>     "__tablename__" not in cls.__dict__
<span class="ansi-green-intense-fg ansi-bold">    125</span>     and "__table__" in cls.__dict__
<span class="ansi-green-intense-fg ansi-bold">    126</span>     and cls.__dict__["__table__"] is None
<span class="ansi-green-intense-fg ansi-bold">    127</span> ):

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/decl_api.py:199</span>, in <span class="ansi-cyan-fg">DeclarativeMeta.__init__</span><span class="ansi-blue-fg">(cls, classname, bases, dict_, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">    196</span>         cls._sa_registry = reg
<span class="ansi-green-intense-fg ansi-bold">    198</span> if not cls.__dict__.get("__abstract__", False):
<span class="ansi-green-fg">--&gt; 199</span>     _as_declarative(reg, cls, dict_)
<span class="ansi-green-intense-fg ansi-bold">    200</span> type.__init__(cls, classname, bases, dict_)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py:248</span>, in <span class="ansi-cyan-fg">_as_declarative</span><span class="ansi-blue-fg">(registry, cls, dict_)</span>
<span class="ansi-green-intense-fg ansi-bold">    242</span> def _as_declarative(
<span class="ansi-green-intense-fg ansi-bold">    243</span>     registry: _RegistryType, cls: Type[Any], dict_: _ClassDict
<span class="ansi-green-intense-fg ansi-bold">    244</span> ) -&gt; Optional[_MapperConfig]:
<span class="ansi-green-intense-fg ansi-bold">    245</span> 
<span class="ansi-green-intense-fg ansi-bold">    246</span>     # declarative scans the class for attributes.  no table or mapper
<span class="ansi-green-intense-fg ansi-bold">    247</span>     # args passed separately.
<span class="ansi-green-fg">--&gt; 248</span>     return _MapperConfig.setup_mapping(registry, cls, dict_, None, {})

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py:329</span>, in <span class="ansi-cyan-fg">_MapperConfig.setup_mapping</span><span class="ansi-blue-fg">(cls, registry, cls_, dict_, table, mapper_kw)</span>
<span class="ansi-green-intense-fg ansi-bold">    325</span>     return _DeferredMapperConfig(
<span class="ansi-green-intense-fg ansi-bold">    326</span>         registry, cls_, dict_, table, mapper_kw
<span class="ansi-green-intense-fg ansi-bold">    327</span>     )
<span class="ansi-green-intense-fg ansi-bold">    328</span> else:
<span class="ansi-green-fg">--&gt; 329</span>     return _ClassScanMapperConfig(
<span class="ansi-green-intense-fg ansi-bold">    330</span>         registry, cls_, dict_, table, mapper_kw
<span class="ansi-green-intense-fg ansi-bold">    331</span>     )

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py:578</span>, in <span class="ansi-cyan-fg">_ClassScanMapperConfig.__init__</span><span class="ansi-blue-fg">(self, registry, cls_, dict_, table, mapper_kw)</span>
<span class="ansi-green-intense-fg ansi-bold">    574</span> self._extract_mappable_attributes()
<span class="ansi-green-intense-fg ansi-bold">    576</span> self._extract_declared_columns()
<span class="ansi-green-fg">--&gt; 578</span> self._setup_table(table)
<span class="ansi-green-intense-fg ansi-bold">    580</span> self._setup_inheriting_columns(mapper_kw)
<span class="ansi-green-intense-fg ansi-bold">    582</span> self._early_mapping(mapper_kw)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/decl_base.py:1663</span>, in <span class="ansi-cyan-fg">_ClassScanMapperConfig._setup_table</span><span class="ansi-blue-fg">(self, table)</span>
<span class="ansi-green-intense-fg ansi-bold">   1655</span>             table_kw["autoload"] = True
<span class="ansi-green-intense-fg ansi-bold">   1657</span>         sorted_columns = sorted(
<span class="ansi-green-intense-fg ansi-bold">   1658</span>             declared_columns,
<span class="ansi-green-intense-fg ansi-bold">   1659</span>             key=lambda c: column_ordering.get(c, 0),
<span class="ansi-green-intense-fg ansi-bold">   1660</span>         )
<span class="ansi-green-intense-fg ansi-bold">   1661</span>         table = self.set_cls_attribute(
<span class="ansi-green-intense-fg ansi-bold">   1662</span>             "__table__",
<span class="ansi-green-fg">-&gt; 1663</span>             table_cls(
<span class="ansi-green-intense-fg ansi-bold">   1664</span>                 tablename,
<span class="ansi-green-intense-fg ansi-bold">   1665</span>                 self._metadata_for_cls(manager),
<span class="ansi-green-intense-fg ansi-bold">   1666</span>                 *sorted_columns,
<span class="ansi-green-intense-fg ansi-bold">   1667</span>                 *args,
<span class="ansi-green-intense-fg ansi-bold">   1668</span>                 **table_kw,
<span class="ansi-green-intense-fg ansi-bold">   1669</span>             ),
<span class="ansi-green-intense-fg ansi-bold">   1670</span>         )
<span class="ansi-green-intense-fg ansi-bold">   1671</span> else:
<span class="ansi-green-intense-fg ansi-bold">   1672</span>     if table is None:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/flask_sqlalchemy/model.py:147</span>, in <span class="ansi-cyan-fg">NameMetaMixin.__table_cls__</span><span class="ansi-blue-fg">(cls, *args, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    144</span> # Check if a table with this name already exists. Allows reflected tables to be
<span class="ansi-green-intense-fg ansi-bold">    145</span> # applied to models by name.
<span class="ansi-green-intense-fg ansi-bold">    146</span> if key in cls.metadata.tables:
<span class="ansi-green-fg">--&gt; 147</span>     return sa.Table(*args, **kwargs)
<span class="ansi-green-intense-fg ansi-bold">    149</span> # If a primary key is found, create a table for joined-table inheritance.
<span class="ansi-green-intense-fg ansi-bold">    150</span> for arg in args:

File <span class="ansi-green-fg">&lt;string&gt;:2</span>, in <span class="ansi-cyan-fg">__new__</span><span class="ansi-blue-fg">(cls, *args, **kw)</span>

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/util/deprecations.py:277</span>, in <span class="ansi-cyan-fg">deprecated_params.&lt;locals&gt;.decorate.&lt;locals&gt;.warned</span><span class="ansi-blue-fg">(fn, *args, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    270</span>     if m in kwargs:
<span class="ansi-green-intense-fg ansi-bold">    271</span>         _warn_with_version(
<span class="ansi-green-intense-fg ansi-bold">    272</span>             messages[m],
<span class="ansi-green-intense-fg ansi-bold">    273</span>             versions[m],
<span class="ansi-green-intense-fg ansi-bold">    274</span>             version_warnings[m],
<span class="ansi-green-intense-fg ansi-bold">    275</span>             stacklevel=3,
<span class="ansi-green-intense-fg ansi-bold">    276</span>         )
<span class="ansi-green-fg">--&gt; 277</span> return fn(*args, **kwargs)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/sql/schema.py:428</span>, in <span class="ansi-cyan-fg">Table.__new__</span><span class="ansi-blue-fg">(cls, *args, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">    421</span> @util.deprecated_params(
<span class="ansi-green-intense-fg ansi-bold">    422</span>     mustexist=(
<span class="ansi-green-intense-fg ansi-bold">    423</span>         "1.4",
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">    426</span> )
<span class="ansi-green-intense-fg ansi-bold">    427</span> def __new__(cls, *args: Any, **kw: Any) -&gt; Any:
<span class="ansi-green-fg">--&gt; 428</span>     return cls._new(*args, **kw)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/sql/schema.py:460</span>, in <span class="ansi-cyan-fg">Table._new</span><span class="ansi-blue-fg">(cls, *args, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">    458</span> if key in metadata.tables:
<span class="ansi-green-intense-fg ansi-bold">    459</span>     if not keep_existing and not extend_existing and bool(args):
<span class="ansi-green-fg">--&gt; 460</span>         raise exc.InvalidRequestError(
<span class="ansi-green-intense-fg ansi-bold">    461</span>             "Table '%s' is already defined for this MetaData "
<span class="ansi-green-intense-fg ansi-bold">    462</span>             "instance.  Specify 'extend_existing=True' "
<span class="ansi-green-intense-fg ansi-bold">    463</span>             "to redefine "
<span class="ansi-green-intense-fg ansi-bold">    464</span>             "options and columns on an "
<span class="ansi-green-intense-fg ansi-bold">    465</span>             "existing Table object." % key
<span class="ansi-green-intense-fg ansi-bold">    466</span>         )
<span class="ansi-green-intense-fg ansi-bold">    467</span>     table = metadata.tables[key]
<span class="ansi-green-intense-fg ansi-bold">    468</span>     if extend_existing:

<span class="ansi-red-fg">InvalidRequestError</span>: Table 'MLB' is already defined for this MetaData instance.  Specify 'extend_existing=True' to redefine options and columns on an existing Table object.</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Here we import items for users</li>
<li>Users, ID, Password is all set up here.</li>
<li>We create a class called User, which is then stored in the database</li>
<li>We make more functions for name, user ID, password, and date of birth</li>
<li>We also implement CRUD (Create Read Update Delete)</li>
<li>All user data is stored in the database.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Initial-Data">
<a class="anchor" href="#Initial-Data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Initial Data<a class="anchor-link" href="#Initial-Data"> </a>
</h2>
<blockquote>
<p>Uses SQLALchemy db.create_all() to initialize rows into sqlite.db</p>
</blockquote>
<ul>
<li>Comment on how these work?<ol>
<li>Create All Tables from db Object</li>
<li>User Object Constructors</li>
<li>Try / Except </li>
</ol>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">initMLB</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="sd">"""Create database and tables"""</span>
        <span class="n">db</span><span class="o">.</span><span class="n">create_all</span><span class="p">()</span>

        <span class="sd">"""Tester data for table"""</span>
        <span class="n">u1</span> <span class="o">=</span> <span class="n">MLB</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'Manny Machado'</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s2">"machados13"</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'Third Base'</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span> <span class="n">team</span><span class="o">=</span><span class="s1">'San Diego Padres'</span><span class="p">)</span>
        <span class="n">u2</span> <span class="o">=</span> <span class="n">MLB</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'Mike Trout'</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s2">"miketrout"</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'Center Field'</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">27</span><span class="p">,</span> <span class="n">team</span><span class="o">=</span><span class="s1">'Los Angeles Angels'</span><span class="p">)</span>
        <span class="n">u3</span> <span class="o">=</span> <span class="n">MLB</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'Blake Snell'</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s2">"snellzilla4"</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'Pitcher'</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">team</span><span class="o">=</span><span class="s1">'San Diego Padres'</span><span class="p">)</span>
        <span class="n">u4</span> <span class="o">=</span> <span class="n">MLB</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'Aaron Judge'</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s2">"thejudge44"</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'Right Field'</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">99</span><span class="p">,</span> <span class="n">team</span><span class="o">=</span><span class="s1">'New York Yankees'</span><span class="p">)</span>
        <span class="n">u5</span> <span class="o">=</span> <span class="n">MLB</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'Julio Rodriguez'</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s2">"jrodshow44"</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'Center Field'</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">44</span><span class="p">,</span> <span class="n">team</span><span class="o">=</span><span class="s1">'Seattle Mariners'</span><span class="p">)</span>
        <span class="n">u6</span> <span class="o">=</span> <span class="n">MLB</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'Justin Verlander'</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s2">"justinverlander"</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'Pitcher'</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">team</span><span class="o">=</span><span class="s1">'New York Mets'</span><span class="p">)</span>
        <span class="n">u7</span> <span class="o">=</span> <span class="n">MLB</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'Bryce Harper'</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s2">"bryceharper3"</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">'Designated Hitter'</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">team</span><span class="o">=</span><span class="s1">'Philadelphia Phillies'</span><span class="p">)</span>

        <span class="n">mlb_players</span> <span class="o">=</span> <span class="p">[</span><span class="n">u1</span><span class="p">,</span> <span class="n">u2</span><span class="p">,</span> <span class="n">u3</span><span class="p">,</span> <span class="n">u4</span><span class="p">,</span> <span class="n">u5</span><span class="p">,</span> <span class="n">u6</span><span class="p">,</span> <span class="n">u7</span><span class="p">]</span> <span class="c1"># Changed variable name to MLB_players4</span>
        <span class="sd">"""Builds sample Track/note(s) data"""</span>
        <span class="k">for</span> <span class="n">player</span> <span class="ow">in</span> <span class="n">mlb_players</span><span class="p">:</span> <span class="c1"># Changed variable name to corresponding MLB player</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="sd">'''add Track to table'''</span>
                <span class="nb">object</span> <span class="o">=</span> <span class="n">player</span><span class="o">.</span><span class="n">create</span><span class="p">()</span> <span class="c1"># Changed variable name to player</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Created new uid </span><span class="si">{</span><span class="nb">object</span><span class="o">.</span><span class="n">uid</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>  <span class="c1"># error raised if object nit created</span>
                <span class="sd">'''fails with bad or duplicate data'''</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Records exist uid </span><span class="si">{</span><span class="n">player</span><span class="o">.</span><span class="n">uid</span><span class="si">}</span><span class="s2">, or error."</span><span class="p">)</span>
        
<span class="n">initMLB</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">AttributeError</span>                            Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb Cell 11</span> in <span class="ansi-cyan-fg">&lt;cell line: 25&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=22'&gt;23&lt;/a&gt;</span>                 '''fails with bad or duplicate data'''
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=23'&gt;24&lt;/a&gt;</span>                 print(f"Records exist uid {player.uid}, or error.")
<span class="ansi-green-fg">---&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=24'&gt;25&lt;/a&gt;</span> initMLB()

<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb Cell 11</span> in <span class="ansi-cyan-fg">initMLB</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=11'&gt;12&lt;/a&gt;</span> u7 = MLB(name='Bryce Harper', uid="bryceharper3", position='Designated Hitter', number=3, team='Philadelphia Phillies')
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=13'&gt;14&lt;/a&gt;</span> MLB_players = [u1, u2, u3, u4, u5, u6, u7] # Changed variable name to MLB_players4
<span class="ansi-green-fg">---&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=14'&gt;15&lt;/a&gt;</span> db.create_all()
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=15'&gt;16&lt;/a&gt;</span> """Builds sample Track/note(s) data"""
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=16'&gt;17&lt;/a&gt;</span> for player in MLB_players: # Changed variable name to corresponding MLB player

<span class="ansi-red-fg">AttributeError</span>: module 'sqlalchemy' has no attribute 'create_all'</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Here we have a list of users (u1 - u6) with each user having their own name, ID, password, and date of birth.</li>
<li>If all the objects are present, then the user is successfully created.</li>
<li>If one or more of the objects are not there, then the user will be prompted to fill out the other fields, or else the user will not be created.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Check-for-given-Credentials-in-users-table-in-sqlite.db">
<a class="anchor" href="#Check-for-given-Credentials-in-users-table-in-sqlite.db" aria-hidden="true"><span class="octicon octicon-link"></span></a>Check for given Credentials in users table in sqlite.db<a class="anchor-link" href="#Check-for-given-Credentials-in-users-table-in-sqlite.db"> </a>
</h2>
<blockquote>
<p>Use of ORM Query object and custom methods to identify user to credentials uid and password</p>
</blockquote>
<ul>
<li>Comment on purpose of following<ol>
<li>User.query.filter_by</li>
<li>user.password</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">find_by_uid</span><span class="p">(</span><span class="n">uid</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">MLB</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">_uid</span><span class="o">=</span><span class="n">uid</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">user</span> <span class="c1"># returns user object</span>

<span class="c1"># Check credentials by finding user and verify password</span>
<span class="k">def</span> <span class="nf">check_credentials</span><span class="p">(</span><span class="n">uid</span><span class="p">):</span>
    <span class="c1"># query email and return user record</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">find_by_uid</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">user</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>
        
<span class="n">check_credentials</span><span class="p">(</span><span class="s2">"machados13"</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">OperationalError</span>                          Traceback (most recent call last)
File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:145</span>, in <span class="ansi-cyan-fg">Connection.__init__</span><span class="ansi-blue-fg">(self, engine, connection, _has_events, _allow_revalidate, _allow_autobegin)</span>
<span class="ansi-green-intense-fg ansi-bold">    144</span> try:
<span class="ansi-green-fg">--&gt; 145</span>     self._dbapi_connection = engine.raw_connection()
<span class="ansi-green-intense-fg ansi-bold">    146</span> except dialect.loaded_dbapi.Error as err:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:3275</span>, in <span class="ansi-cyan-fg">Engine.raw_connection</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   3254</span> """Return a "raw" DBAPI connection from the connection pool.
<span class="ansi-green-intense-fg ansi-bold">   3255</span> 
<span class="ansi-green-intense-fg ansi-bold">   3256</span> The returned object is a proxied version of the DBAPI
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   3273</span> 
<span class="ansi-green-intense-fg ansi-bold">   3274</span> """
<span class="ansi-green-fg">-&gt; 3275</span> return self.pool.connect()

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/pool/base.py:455</span>, in <span class="ansi-cyan-fg">Pool.connect</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    448</span> """Return a DBAPI connection from the pool.
<span class="ansi-green-intense-fg ansi-bold">    449</span> 
<span class="ansi-green-intense-fg ansi-bold">    450</span> The connection is instrumented such that when its
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">    453</span> 
<span class="ansi-green-intense-fg ansi-bold">    454</span> """
<span class="ansi-green-fg">--&gt; 455</span> return _ConnectionFairy._checkout(self)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/pool/base.py:1271</span>, in <span class="ansi-cyan-fg">_ConnectionFairy._checkout</span><span class="ansi-blue-fg">(cls, pool, threadconns, fairy)</span>
<span class="ansi-green-intense-fg ansi-bold">   1270</span> if not fairy:
<span class="ansi-green-fg">-&gt; 1271</span>     fairy = _ConnectionRecord.checkout(pool)
<span class="ansi-green-intense-fg ansi-bold">   1273</span>     if threadconns is not None:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/pool/base.py:719</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.checkout</span><span class="ansi-blue-fg">(cls, pool)</span>
<span class="ansi-green-intense-fg ansi-bold">    718</span> else:
<span class="ansi-green-fg">--&gt; 719</span>     rec = pool._do_get()
<span class="ansi-green-intense-fg ansi-bold">    721</span> try:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/pool/impl.py:169</span>, in <span class="ansi-cyan-fg">QueuePool._do_get</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    168</span> with util.safe_reraise():
<span class="ansi-green-fg">--&gt; 169</span>     self._dec_overflow()
<span class="ansi-green-intense-fg ansi-bold">    170</span> raise

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py:147</span>, in <span class="ansi-cyan-fg">safe_reraise.__exit__</span><span class="ansi-blue-fg">(self, type_, value, traceback)</span>
<span class="ansi-green-intense-fg ansi-bold">    146</span>     self._exc_info = None  # remove potential circular references
<span class="ansi-green-fg">--&gt; 147</span>     raise exc_value.with_traceback(exc_tb)
<span class="ansi-green-intense-fg ansi-bold">    148</span> else:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/pool/impl.py:166</span>, in <span class="ansi-cyan-fg">QueuePool._do_get</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    165</span> try:
<span class="ansi-green-fg">--&gt; 166</span>     return self._create_connection()
<span class="ansi-green-intense-fg ansi-bold">    167</span> except:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/pool/base.py:396</span>, in <span class="ansi-cyan-fg">Pool._create_connection</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    394</span> """Called by subclasses to create a new ConnectionRecord."""
<span class="ansi-green-fg">--&gt; 396</span> return _ConnectionRecord(self)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/pool/base.py:681</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.__init__</span><span class="ansi-blue-fg">(self, pool, connect)</span>
<span class="ansi-green-intense-fg ansi-bold">    680</span> if connect:
<span class="ansi-green-fg">--&gt; 681</span>     self.__connect()
<span class="ansi-green-intense-fg ansi-bold">    682</span> self.finalize_callback = deque()

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/pool/base.py:906</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.__connect</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    905</span>     with util.safe_reraise():
<span class="ansi-green-fg">--&gt; 906</span>         pool.logger.debug("Error on connect(): %s", e)
<span class="ansi-green-intense-fg ansi-bold">    907</span> else:
<span class="ansi-green-intense-fg ansi-bold">    908</span>     # in SQLAlchemy 1.4 the first_connect event is not used by
<span class="ansi-green-intense-fg ansi-bold">    909</span>     # the engine, so this will usually not be set

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py:147</span>, in <span class="ansi-cyan-fg">safe_reraise.__exit__</span><span class="ansi-blue-fg">(self, type_, value, traceback)</span>
<span class="ansi-green-intense-fg ansi-bold">    146</span>     self._exc_info = None  # remove potential circular references
<span class="ansi-green-fg">--&gt; 147</span>     raise exc_value.with_traceback(exc_tb)
<span class="ansi-green-intense-fg ansi-bold">    148</span> else:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/pool/base.py:901</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.__connect</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    900</span> self.starttime = time.time()
<span class="ansi-green-fg">--&gt; 901</span> self.dbapi_connection = connection = pool._invoke_creator(self)
<span class="ansi-green-intense-fg ansi-bold">    902</span> pool.logger.debug("Created new connection %r", connection)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/create.py:641</span>, in <span class="ansi-cyan-fg">create_engine.&lt;locals&gt;.connect</span><span class="ansi-blue-fg">(connection_record)</span>
<span class="ansi-green-intense-fg ansi-bold">    639</span>             return connection
<span class="ansi-green-fg">--&gt; 641</span> return dialect.connect(*cargs, **cparams)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/default.py:580</span>, in <span class="ansi-cyan-fg">DefaultDialect.connect</span><span class="ansi-blue-fg">(self, *cargs, **cparams)</span>
<span class="ansi-green-intense-fg ansi-bold">    578</span> def connect(self, *cargs, **cparams):
<span class="ansi-green-intense-fg ansi-bold">    579</span>     # inherits the docstring from interfaces.Dialect.connect
<span class="ansi-green-fg">--&gt; 580</span>     return self.loaded_dbapi.connect(*cargs, **cparams)

<span class="ansi-red-fg">OperationalError</span>: unable to open database file

The above exception was the direct cause of the following exception:

<span class="ansi-red-fg">OperationalError</span>                          Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb Cell 13</span> in <span class="ansi-cyan-fg">&lt;cell line: 15&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X15sdnNjb2RlLXJlbW90ZQ%3D%3D?line=11'&gt;12&lt;/a&gt;</span>         return False
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X15sdnNjb2RlLXJlbW90ZQ%3D%3D?line=12'&gt;13&lt;/a&gt;</span>     return True
<span class="ansi-green-fg">---&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X15sdnNjb2RlLXJlbW90ZQ%3D%3D?line=14'&gt;15&lt;/a&gt;</span> check_credentials("machados13")

<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb Cell 13</span> in <span class="ansi-cyan-fg">check_credentials</span><span class="ansi-blue-fg">(uid)</span>
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X15sdnNjb2RlLXJlbW90ZQ%3D%3D?line=7'&gt;8&lt;/a&gt;</span> def check_credentials(uid):
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X15sdnNjb2RlLXJlbW90ZQ%3D%3D?line=8'&gt;9&lt;/a&gt;</span>     # query email and return user record
<span class="ansi-green-fg">---&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X15sdnNjb2RlLXJlbW90ZQ%3D%3D?line=9'&gt;10&lt;/a&gt;</span>     user = find_by_uid(uid)
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X15sdnNjb2RlLXJlbW90ZQ%3D%3D?line=10'&gt;11&lt;/a&gt;</span>     if user == None:
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X15sdnNjb2RlLXJlbW90ZQ%3D%3D?line=11'&gt;12&lt;/a&gt;</span>         return False

<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb Cell 13</span> in <span class="ansi-cyan-fg">find_by_uid</span><span class="ansi-blue-fg">(uid)</span>
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X15sdnNjb2RlLXJlbW90ZQ%3D%3D?line=1'&gt;2&lt;/a&gt;</span> def find_by_uid(uid):
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X15sdnNjb2RlLXJlbW90ZQ%3D%3D?line=2'&gt;3&lt;/a&gt;</span>     with app.app_context():
<span class="ansi-green-fg">----&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X15sdnNjb2RlLXJlbW90ZQ%3D%3D?line=3'&gt;4&lt;/a&gt;</span>         user = MLB.query.filter_by(_uid=uid).first()
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X15sdnNjb2RlLXJlbW90ZQ%3D%3D?line=4'&gt;5&lt;/a&gt;</span>     return user

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/query.py:2752</span>, in <span class="ansi-cyan-fg">Query.first</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   2750</span>     return self._iter().first()  # type: ignore
<span class="ansi-green-intense-fg ansi-bold">   2751</span> else:
<span class="ansi-green-fg">-&gt; 2752</span>     return self.limit(1)._iter().first()

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/query.py:2855</span>, in <span class="ansi-cyan-fg">Query._iter</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   2852</span> params = self._params
<span class="ansi-green-intense-fg ansi-bold">   2854</span> statement = self._statement_20()
<span class="ansi-green-fg">-&gt; 2855</span> result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
<span class="ansi-green-intense-fg ansi-bold">   2856</span>     statement,
<span class="ansi-green-intense-fg ansi-bold">   2857</span>     params,
<span class="ansi-green-intense-fg ansi-bold">   2858</span>     execution_options={"_sa_orm_load_options": self.load_options},
<span class="ansi-green-intense-fg ansi-bold">   2859</span> )
<span class="ansi-green-intense-fg ansi-bold">   2861</span> # legacy: automatically set scalars, unique
<span class="ansi-green-intense-fg ansi-bold">   2862</span> if result._attributes.get("is_single_entity", False):

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/session.py:2229</span>, in <span class="ansi-cyan-fg">Session.execute</span><span class="ansi-blue-fg">(self, statement, params, execution_options, bind_arguments, _parent_execute_state, _add_event)</span>
<span class="ansi-green-intense-fg ansi-bold">   2168</span> def execute(
<span class="ansi-green-intense-fg ansi-bold">   2169</span>     self,
<span class="ansi-green-intense-fg ansi-bold">   2170</span>     statement: Executable,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   2176</span>     _add_event: Optional[Any] = None,
<span class="ansi-green-intense-fg ansi-bold">   2177</span> ) -&gt; Result[Any]:
<span class="ansi-green-intense-fg ansi-bold">   2178</span>     r"""Execute a SQL expression construct.
<span class="ansi-green-intense-fg ansi-bold">   2179</span> 
<span class="ansi-green-intense-fg ansi-bold">   2180</span>     Returns a :class:`_engine.Result` object representing
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   2227</span> 
<span class="ansi-green-intense-fg ansi-bold">   2228</span>     """
<span class="ansi-green-fg">-&gt; 2229</span>     return self._execute_internal(
<span class="ansi-green-intense-fg ansi-bold">   2230</span>         statement,
<span class="ansi-green-intense-fg ansi-bold">   2231</span>         params,
<span class="ansi-green-intense-fg ansi-bold">   2232</span>         execution_options=execution_options,
<span class="ansi-green-intense-fg ansi-bold">   2233</span>         bind_arguments=bind_arguments,
<span class="ansi-green-intense-fg ansi-bold">   2234</span>         _parent_execute_state=_parent_execute_state,
<span class="ansi-green-intense-fg ansi-bold">   2235</span>         _add_event=_add_event,
<span class="ansi-green-intense-fg ansi-bold">   2236</span>     )

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/session.py:2114</span>, in <span class="ansi-cyan-fg">Session._execute_internal</span><span class="ansi-blue-fg">(self, statement, params, execution_options, bind_arguments, _parent_execute_state, _add_event, _scalar_result)</span>
<span class="ansi-green-intense-fg ansi-bold">   2100</span>     (
<span class="ansi-green-intense-fg ansi-bold">   2101</span>         statement,
<span class="ansi-green-intense-fg ansi-bold">   2102</span>         execution_options,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   2109</span>         False,
<span class="ansi-green-intense-fg ansi-bold">   2110</span>     )
<span class="ansi-green-intense-fg ansi-bold">   2112</span> bind = self.get_bind(**bind_arguments)
<span class="ansi-green-fg">-&gt; 2114</span> conn = self._connection_for_bind(bind)
<span class="ansi-green-intense-fg ansi-bold">   2116</span> if _scalar_result and not compile_state_cls:
<span class="ansi-green-intense-fg ansi-bold">   2117</span>     if TYPE_CHECKING:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/session.py:1981</span>, in <span class="ansi-cyan-fg">Session._connection_for_bind</span><span class="ansi-blue-fg">(self, engine, execution_options, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">   1979</span> if trans is None:
<span class="ansi-green-intense-fg ansi-bold">   1980</span>     trans = self._autobegin_t()
<span class="ansi-green-fg">-&gt; 1981</span> return trans._connection_for_bind(engine, execution_options)

File <span class="ansi-green-fg">&lt;string&gt;:2</span>, in <span class="ansi-cyan-fg">_connection_for_bind</span><span class="ansi-blue-fg">(self, bind, execution_options)</span>

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py:137</span>, in <span class="ansi-cyan-fg">_StateChange.declare_states.&lt;locals&gt;._go</span><span class="ansi-blue-fg">(fn, self, *arg, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">    135</span> self._next_state = _StateChangeStates.CHANGE_IN_PROGRESS
<span class="ansi-green-intense-fg ansi-bold">    136</span> try:
<span class="ansi-green-fg">--&gt; 137</span>     ret_value = fn(self, *arg, **kw)
<span class="ansi-green-intense-fg ansi-bold">    138</span> except:
<span class="ansi-green-intense-fg ansi-bold">    139</span>     raise

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/session.py:1108</span>, in <span class="ansi-cyan-fg">SessionTransaction._connection_for_bind</span><span class="ansi-blue-fg">(self, bind, execution_options)</span>
<span class="ansi-green-intense-fg ansi-bold">   1103</span>             raise sa_exc.InvalidRequestError(
<span class="ansi-green-intense-fg ansi-bold">   1104</span>                 "Session already has a Connection associated for the "
<span class="ansi-green-intense-fg ansi-bold">   1105</span>                 "given Connection's Engine"
<span class="ansi-green-intense-fg ansi-bold">   1106</span>             )
<span class="ansi-green-intense-fg ansi-bold">   1107</span>     else:
<span class="ansi-green-fg">-&gt; 1108</span>         conn = bind.connect()
<span class="ansi-green-intense-fg ansi-bold">   1109</span>         local_connect = True
<span class="ansi-green-intense-fg ansi-bold">   1111</span> try:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:3251</span>, in <span class="ansi-cyan-fg">Engine.connect</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   3228</span> def connect(self) -&gt; Connection:
<span class="ansi-green-intense-fg ansi-bold">   3229</span>     """Return a new :class:`_engine.Connection` object.
<span class="ansi-green-intense-fg ansi-bold">   3230</span> 
<span class="ansi-green-intense-fg ansi-bold">   3231</span>     The :class:`_engine.Connection` acts as a Python context manager, so
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   3248</span> 
<span class="ansi-green-intense-fg ansi-bold">   3249</span>     """
<span class="ansi-green-fg">-&gt; 3251</span>     return self._connection_cls(self)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:147</span>, in <span class="ansi-cyan-fg">Connection.__init__</span><span class="ansi-blue-fg">(self, engine, connection, _has_events, _allow_revalidate, _allow_autobegin)</span>
<span class="ansi-green-intense-fg ansi-bold">    145</span>         self._dbapi_connection = engine.raw_connection()
<span class="ansi-green-intense-fg ansi-bold">    146</span>     except dialect.loaded_dbapi.Error as err:
<span class="ansi-green-fg">--&gt; 147</span>         Connection._handle_dbapi_exception_noconnection(
<span class="ansi-green-intense-fg ansi-bold">    148</span>             err, dialect, engine
<span class="ansi-green-intense-fg ansi-bold">    149</span>         )
<span class="ansi-green-intense-fg ansi-bold">    150</span>         raise
<span class="ansi-green-intense-fg ansi-bold">    151</span> else:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:2413</span>, in <span class="ansi-cyan-fg">Connection._handle_dbapi_exception_noconnection</span><span class="ansi-blue-fg">(cls, e, dialect, engine, is_disconnect, invalidate_pool_on_disconnect, is_pre_ping)</span>
<span class="ansi-green-intense-fg ansi-bold">   2411</span> elif should_wrap:
<span class="ansi-green-intense-fg ansi-bold">   2412</span>     assert sqlalchemy_exception is not None
<span class="ansi-green-fg">-&gt; 2413</span>     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
<span class="ansi-green-intense-fg ansi-bold">   2414</span> else:
<span class="ansi-green-intense-fg ansi-bold">   2415</span>     assert exc_info[1] is not None

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:145</span>, in <span class="ansi-cyan-fg">Connection.__init__</span><span class="ansi-blue-fg">(self, engine, connection, _has_events, _allow_revalidate, _allow_autobegin)</span>
<span class="ansi-green-intense-fg ansi-bold">    143</span> if connection is None:
<span class="ansi-green-intense-fg ansi-bold">    144</span>     try:
<span class="ansi-green-fg">--&gt; 145</span>         self._dbapi_connection = engine.raw_connection()
<span class="ansi-green-intense-fg ansi-bold">    146</span>     except dialect.loaded_dbapi.Error as err:
<span class="ansi-green-intense-fg ansi-bold">    147</span>         Connection._handle_dbapi_exception_noconnection(
<span class="ansi-green-intense-fg ansi-bold">    148</span>             err, dialect, engine
<span class="ansi-green-intense-fg ansi-bold">    149</span>         )

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:3275</span>, in <span class="ansi-cyan-fg">Engine.raw_connection</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   3253</span> def raw_connection(self) -&gt; PoolProxiedConnection:
<span class="ansi-green-intense-fg ansi-bold">   3254</span>     """Return a "raw" DBAPI connection from the connection pool.
<span class="ansi-green-intense-fg ansi-bold">   3255</span> 
<span class="ansi-green-intense-fg ansi-bold">   3256</span>     The returned object is a proxied version of the DBAPI
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   3273</span> 
<span class="ansi-green-intense-fg ansi-bold">   3274</span>     """
<span class="ansi-green-fg">-&gt; 3275</span>     return self.pool.connect()

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/pool/base.py:455</span>, in <span class="ansi-cyan-fg">Pool.connect</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    447</span> def connect(self) -&gt; PoolProxiedConnection:
<span class="ansi-green-intense-fg ansi-bold">    448</span>     """Return a DBAPI connection from the pool.
<span class="ansi-green-intense-fg ansi-bold">    449</span> 
<span class="ansi-green-intense-fg ansi-bold">    450</span>     The connection is instrumented such that when its
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">    453</span> 
<span class="ansi-green-intense-fg ansi-bold">    454</span>     """
<span class="ansi-green-fg">--&gt; 455</span>     return _ConnectionFairy._checkout(self)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/pool/base.py:1271</span>, in <span class="ansi-cyan-fg">_ConnectionFairy._checkout</span><span class="ansi-blue-fg">(cls, pool, threadconns, fairy)</span>
<span class="ansi-green-intense-fg ansi-bold">   1262</span> @classmethod
<span class="ansi-green-intense-fg ansi-bold">   1263</span> def _checkout(
<span class="ansi-green-intense-fg ansi-bold">   1264</span>     cls,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   1267</span>     fairy: Optional[_ConnectionFairy] = None,
<span class="ansi-green-intense-fg ansi-bold">   1268</span> ) -&gt; _ConnectionFairy:
<span class="ansi-green-intense-fg ansi-bold">   1270</span>     if not fairy:
<span class="ansi-green-fg">-&gt; 1271</span>         fairy = _ConnectionRecord.checkout(pool)
<span class="ansi-green-intense-fg ansi-bold">   1273</span>         if threadconns is not None:
<span class="ansi-green-intense-fg ansi-bold">   1274</span>             threadconns.current = weakref.ref(fairy)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/pool/base.py:719</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.checkout</span><span class="ansi-blue-fg">(cls, pool)</span>
<span class="ansi-green-intense-fg ansi-bold">    717</span>     rec = cast(_ConnectionRecord, pool._do_get())
<span class="ansi-green-intense-fg ansi-bold">    718</span> else:
<span class="ansi-green-fg">--&gt; 719</span>     rec = pool._do_get()
<span class="ansi-green-intense-fg ansi-bold">    721</span> try:
<span class="ansi-green-intense-fg ansi-bold">    722</span>     dbapi_connection = rec.get_connection()

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/pool/impl.py:169</span>, in <span class="ansi-cyan-fg">QueuePool._do_get</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    167</span>     except:
<span class="ansi-green-intense-fg ansi-bold">    168</span>         with util.safe_reraise():
<span class="ansi-green-fg">--&gt; 169</span>             self._dec_overflow()
<span class="ansi-green-intense-fg ansi-bold">    170</span>         raise
<span class="ansi-green-intense-fg ansi-bold">    171</span> else:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py:147</span>, in <span class="ansi-cyan-fg">safe_reraise.__exit__</span><span class="ansi-blue-fg">(self, type_, value, traceback)</span>
<span class="ansi-green-intense-fg ansi-bold">    145</span>     assert exc_value is not None
<span class="ansi-green-intense-fg ansi-bold">    146</span>     self._exc_info = None  # remove potential circular references
<span class="ansi-green-fg">--&gt; 147</span>     raise exc_value.with_traceback(exc_tb)
<span class="ansi-green-intense-fg ansi-bold">    148</span> else:
<span class="ansi-green-intense-fg ansi-bold">    149</span>     self._exc_info = None  # remove potential circular references

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/pool/impl.py:166</span>, in <span class="ansi-cyan-fg">QueuePool._do_get</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    164</span> if self._inc_overflow():
<span class="ansi-green-intense-fg ansi-bold">    165</span>     try:
<span class="ansi-green-fg">--&gt; 166</span>         return self._create_connection()
<span class="ansi-green-intense-fg ansi-bold">    167</span>     except:
<span class="ansi-green-intense-fg ansi-bold">    168</span>         with util.safe_reraise():

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/pool/base.py:396</span>, in <span class="ansi-cyan-fg">Pool._create_connection</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    393</span> def _create_connection(self) -&gt; ConnectionPoolEntry:
<span class="ansi-green-intense-fg ansi-bold">    394</span>     """Called by subclasses to create a new ConnectionRecord."""
<span class="ansi-green-fg">--&gt; 396</span>     return _ConnectionRecord(self)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/pool/base.py:681</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.__init__</span><span class="ansi-blue-fg">(self, pool, connect)</span>
<span class="ansi-green-intense-fg ansi-bold">    679</span> self.__pool = pool
<span class="ansi-green-intense-fg ansi-bold">    680</span> if connect:
<span class="ansi-green-fg">--&gt; 681</span>     self.__connect()
<span class="ansi-green-intense-fg ansi-bold">    682</span> self.finalize_callback = deque()

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/pool/base.py:906</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.__connect</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    904</span> except BaseException as e:
<span class="ansi-green-intense-fg ansi-bold">    905</span>     with util.safe_reraise():
<span class="ansi-green-fg">--&gt; 906</span>         pool.logger.debug("Error on connect(): %s", e)
<span class="ansi-green-intense-fg ansi-bold">    907</span> else:
<span class="ansi-green-intense-fg ansi-bold">    908</span>     # in SQLAlchemy 1.4 the first_connect event is not used by
<span class="ansi-green-intense-fg ansi-bold">    909</span>     # the engine, so this will usually not be set
<span class="ansi-green-intense-fg ansi-bold">    910</span>     if pool.dispatch.first_connect:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py:147</span>, in <span class="ansi-cyan-fg">safe_reraise.__exit__</span><span class="ansi-blue-fg">(self, type_, value, traceback)</span>
<span class="ansi-green-intense-fg ansi-bold">    145</span>     assert exc_value is not None
<span class="ansi-green-intense-fg ansi-bold">    146</span>     self._exc_info = None  # remove potential circular references
<span class="ansi-green-fg">--&gt; 147</span>     raise exc_value.with_traceback(exc_tb)
<span class="ansi-green-intense-fg ansi-bold">    148</span> else:
<span class="ansi-green-intense-fg ansi-bold">    149</span>     self._exc_info = None  # remove potential circular references

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/pool/base.py:901</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.__connect</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    899</span> try:
<span class="ansi-green-intense-fg ansi-bold">    900</span>     self.starttime = time.time()
<span class="ansi-green-fg">--&gt; 901</span>     self.dbapi_connection = connection = pool._invoke_creator(self)
<span class="ansi-green-intense-fg ansi-bold">    902</span>     pool.logger.debug("Created new connection %r", connection)
<span class="ansi-green-intense-fg ansi-bold">    903</span>     self.fresh = True

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/create.py:641</span>, in <span class="ansi-cyan-fg">create_engine.&lt;locals&gt;.connect</span><span class="ansi-blue-fg">(connection_record)</span>
<span class="ansi-green-intense-fg ansi-bold">    638</span>         if connection is not None:
<span class="ansi-green-intense-fg ansi-bold">    639</span>             return connection
<span class="ansi-green-fg">--&gt; 641</span> return dialect.connect(*cargs, **cparams)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/default.py:580</span>, in <span class="ansi-cyan-fg">DefaultDialect.connect</span><span class="ansi-blue-fg">(self, *cargs, **cparams)</span>
<span class="ansi-green-intense-fg ansi-bold">    578</span> def connect(self, *cargs, **cparams):
<span class="ansi-green-intense-fg ansi-bold">    579</span>     # inherits the docstring from interfaces.Dialect.connect
<span class="ansi-green-fg">--&gt; 580</span>     return self.loaded_dbapi.connect(*cargs, **cparams)

<span class="ansi-red-fg">OperationalError</span>: (sqlite3.OperationalError) unable to open database file
(Background on this error at: https://sqlalche.me/e/20/e3q8)</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>We can runmage through the database to find certain users and their data.</li>
<li>A series of if loops can be run to check to see if the user is there, and if the password is also there.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Create-a-new-User-in-table-in-Sqlite.db">
<a class="anchor" href="#Create-a-new-User-in-table-in-Sqlite.db" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create a new User in table in Sqlite.db<a class="anchor-link" href="#Create-a-new-User-in-table-in-Sqlite.db"> </a>
</h2>
<blockquote>
<p>Uses SQLALchemy and custom user.create() method to add row.</p>
</blockquote>
<ul>
<li>Comment on purpose of following<ol>
<li>user.find_by_uid() and try/except</li>
<li>user = User(...)</li>
<li>user.dob and try/except</li>
<li>user.create() and try/except</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">create</span><span class="p">():</span>
    <span class="c1"># optimize user time to see if uid exists</span>
    <span class="n">uid</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Create your own user ID here: "</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">find_by_uid</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Found</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">return</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span> <span class="c1"># keep going</span>
    
    <span class="c1"># request value that ensure creating valid object</span>
    <span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Add your player's name: "</span><span class="p">)</span>
    <span class="n">position</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Add your player's position: "</span><span class="p">)</span>
    <span class="n">team</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"What team does your team play for? "</span><span class="p">)</span>
    <span class="n">number</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"What number does your player wear? "</span><span class="p">)</span>
    
    <span class="c1"># Initialize User object before date</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">MLB</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> 
                <span class="n">uid</span><span class="o">=</span><span class="n">uid</span><span class="p">,</span> 
                <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
                <span class="n">team</span><span class="o">=</span><span class="n">team</span><span class="p">,</span>
                <span class="n">number</span><span class="o">=</span><span class="n">number</span>
                <span class="p">)</span>
    
    <span class="c1"># create user.dob, fail with today as dob</span>
           
    <span class="c1"># write object to database</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">object</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Created</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nb">object</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">except</span><span class="p">:</span>  <span class="c1"># error raised if object not created</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Unknown error uid </span><span class="si">{uid}</span><span class="s2">"</span><span class="p">)</span>
        
<span class="n">create</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">OperationalError</span>                          Traceback (most recent call last)
File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1808</span>, in <span class="ansi-cyan-fg">Connection._execute_context</span><span class="ansi-blue-fg">(self, dialect, constructor, statement, parameters, execution_options, *args, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">   1807</span>     if not evt_handled:
<span class="ansi-green-fg">-&gt; 1808</span>         self.dialect.do_execute(
<span class="ansi-green-intense-fg ansi-bold">   1809</span>             cursor, statement, parameters, context
<span class="ansi-green-intense-fg ansi-bold">   1810</span>         )
<span class="ansi-green-intense-fg ansi-bold">   1812</span> if self._has_events or self.engine._has_events:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/default.py:732</span>, in <span class="ansi-cyan-fg">DefaultDialect.do_execute</span><span class="ansi-blue-fg">(self, cursor, statement, parameters, context)</span>
<span class="ansi-green-intense-fg ansi-bold">    731</span> def do_execute(self, cursor, statement, parameters, context=None):
<span class="ansi-green-fg">--&gt; 732</span>     cursor.execute(statement, parameters)

<span class="ansi-red-fg">OperationalError</span>: no such table: MLB

The above exception was the direct cause of the following exception:

<span class="ansi-red-fg">OperationalError</span>                          Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb Cell 16</span> in <span class="ansi-cyan-fg">&lt;cell line: 36&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X21sdnNjb2RlLXJlbW90ZQ%3D%3D?line=32'&gt;33&lt;/a&gt;</span>         except:  # error raised if object not created
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X21sdnNjb2RlLXJlbW90ZQ%3D%3D?line=33'&gt;34&lt;/a&gt;</span>             print("Unknown error uid {uid}")
<span class="ansi-green-fg">---&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X21sdnNjb2RlLXJlbW90ZQ%3D%3D?line=35'&gt;36&lt;/a&gt;</span> create()

<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb Cell 16</span> in <span class="ansi-cyan-fg">create</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X21sdnNjb2RlLXJlbW90ZQ%3D%3D?line=1'&gt;2&lt;/a&gt;</span> def create():
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X21sdnNjb2RlLXJlbW90ZQ%3D%3D?line=2'&gt;3&lt;/a&gt;</span>     # optimize user time to see if uid exists
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X21sdnNjb2RlLXJlbW90ZQ%3D%3D?line=3'&gt;4&lt;/a&gt;</span>     uid = input("Create your own user ID here: ")
<span class="ansi-green-fg">----&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X21sdnNjb2RlLXJlbW90ZQ%3D%3D?line=4'&gt;5&lt;/a&gt;</span>     user = find_by_uid(uid)
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X21sdnNjb2RlLXJlbW90ZQ%3D%3D?line=5'&gt;6&lt;/a&gt;</span>     try:
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X21sdnNjb2RlLXJlbW90ZQ%3D%3D?line=6'&gt;7&lt;/a&gt;</span>         print("Found\n", user.read())

<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb Cell 16</span> in <span class="ansi-cyan-fg">find_by_uid</span><span class="ansi-blue-fg">(uid)</span>
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X21sdnNjb2RlLXJlbW90ZQ%3D%3D?line=1'&gt;2&lt;/a&gt;</span> def find_by_uid(uid):
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X21sdnNjb2RlLXJlbW90ZQ%3D%3D?line=2'&gt;3&lt;/a&gt;</span>     with app.app_context():
<span class="ansi-green-fg">----&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X21sdnNjb2RlLXJlbW90ZQ%3D%3D?line=3'&gt;4&lt;/a&gt;</span>         user = MLB.query.filter_by(_uid=uid).first()
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X21sdnNjb2RlLXJlbW90ZQ%3D%3D?line=4'&gt;5&lt;/a&gt;</span>     return user

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/query.py:2810</span>, in <span class="ansi-cyan-fg">Query.first</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   2808</span>     return self._iter().first()
<span class="ansi-green-intense-fg ansi-bold">   2809</span> else:
<span class="ansi-green-fg">-&gt; 2810</span>     return self.limit(1)._iter().first()

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/query.py:2894</span>, in <span class="ansi-cyan-fg">Query._iter</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   2891</span> params = self._params
<span class="ansi-green-intense-fg ansi-bold">   2893</span> statement = self._statement_20()
<span class="ansi-green-fg">-&gt; 2894</span> result = self.session.execute(
<span class="ansi-green-intense-fg ansi-bold">   2895</span>     statement,
<span class="ansi-green-intense-fg ansi-bold">   2896</span>     params,
<span class="ansi-green-intense-fg ansi-bold">   2897</span>     execution_options={"_sa_orm_load_options": self.load_options},
<span class="ansi-green-intense-fg ansi-bold">   2898</span> )
<span class="ansi-green-intense-fg ansi-bold">   2900</span> # legacy: automatically set scalars, unique
<span class="ansi-green-intense-fg ansi-bold">   2901</span> if result._attributes.get("is_single_entity", False):

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/session.py:1692</span>, in <span class="ansi-cyan-fg">Session.execute</span><span class="ansi-blue-fg">(self, statement, params, execution_options, bind_arguments, _parent_execute_state, _add_event, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">   1690</span> else:
<span class="ansi-green-intense-fg ansi-bold">   1691</span>     conn = self._connection_for_bind(bind)
<span class="ansi-green-fg">-&gt; 1692</span> result = conn._execute_20(statement, params or {}, execution_options)
<span class="ansi-green-intense-fg ansi-bold">   1694</span> if compile_state_cls:
<span class="ansi-green-intense-fg ansi-bold">   1695</span>     result = compile_state_cls.orm_setup_cursor_result(
<span class="ansi-green-intense-fg ansi-bold">   1696</span>         self,
<span class="ansi-green-intense-fg ansi-bold">   1697</span>         statement,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   1701</span>         result,
<span class="ansi-green-intense-fg ansi-bold">   1702</span>     )

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1620</span>, in <span class="ansi-cyan-fg">Connection._execute_20</span><span class="ansi-blue-fg">(self, statement, parameters, execution_options)</span>
<span class="ansi-green-intense-fg ansi-bold">   1616</span>     util.raise_(
<span class="ansi-green-intense-fg ansi-bold">   1617</span>         exc.ObjectNotExecutableError(statement), replace_context=err
<span class="ansi-green-intense-fg ansi-bold">   1618</span>     )
<span class="ansi-green-intense-fg ansi-bold">   1619</span> else:
<span class="ansi-green-fg">-&gt; 1620</span>     return meth(self, args_10style, kwargs_10style, execution_options)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/sql/elements.py:325</span>, in <span class="ansi-cyan-fg">ClauseElement._execute_on_connection</span><span class="ansi-blue-fg">(self, connection, multiparams, params, execution_options, _force)</span>
<span class="ansi-green-intense-fg ansi-bold">    321</span> def _execute_on_connection(
<span class="ansi-green-intense-fg ansi-bold">    322</span>     self, connection, multiparams, params, execution_options, _force=False
<span class="ansi-green-intense-fg ansi-bold">    323</span> ):
<span class="ansi-green-intense-fg ansi-bold">    324</span>     if _force or self.supports_execution:
<span class="ansi-green-fg">--&gt; 325</span>         return connection._execute_clauseelement(
<span class="ansi-green-intense-fg ansi-bold">    326</span>             self, multiparams, params, execution_options
<span class="ansi-green-intense-fg ansi-bold">    327</span>         )
<span class="ansi-green-intense-fg ansi-bold">    328</span>     else:
<span class="ansi-green-intense-fg ansi-bold">    329</span>         raise exc.ObjectNotExecutableError(self)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1487</span>, in <span class="ansi-cyan-fg">Connection._execute_clauseelement</span><span class="ansi-blue-fg">(self, elem, multiparams, params, execution_options)</span>
<span class="ansi-green-intense-fg ansi-bold">   1475</span> compiled_cache = execution_options.get(
<span class="ansi-green-intense-fg ansi-bold">   1476</span>     "compiled_cache", self.engine._compiled_cache
<span class="ansi-green-intense-fg ansi-bold">   1477</span> )
<span class="ansi-green-intense-fg ansi-bold">   1479</span> compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
<span class="ansi-green-intense-fg ansi-bold">   1480</span>     dialect=dialect,
<span class="ansi-green-intense-fg ansi-bold">   1481</span>     compiled_cache=compiled_cache,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   1485</span>     linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
<span class="ansi-green-intense-fg ansi-bold">   1486</span> )
<span class="ansi-green-fg">-&gt; 1487</span> ret = self._execute_context(
<span class="ansi-green-intense-fg ansi-bold">   1488</span>     dialect,
<span class="ansi-green-intense-fg ansi-bold">   1489</span>     dialect.execution_ctx_cls._init_compiled,
<span class="ansi-green-intense-fg ansi-bold">   1490</span>     compiled_sql,
<span class="ansi-green-intense-fg ansi-bold">   1491</span>     distilled_params,
<span class="ansi-green-intense-fg ansi-bold">   1492</span>     execution_options,
<span class="ansi-green-intense-fg ansi-bold">   1493</span>     compiled_sql,
<span class="ansi-green-intense-fg ansi-bold">   1494</span>     distilled_params,
<span class="ansi-green-intense-fg ansi-bold">   1495</span>     elem,
<span class="ansi-green-intense-fg ansi-bold">   1496</span>     extracted_params,
<span class="ansi-green-intense-fg ansi-bold">   1497</span>     cache_hit=cache_hit,
<span class="ansi-green-intense-fg ansi-bold">   1498</span> )
<span class="ansi-green-intense-fg ansi-bold">   1499</span> if has_events:
<span class="ansi-green-intense-fg ansi-bold">   1500</span>     self.dispatch.after_execute(
<span class="ansi-green-intense-fg ansi-bold">   1501</span>         self,
<span class="ansi-green-intense-fg ansi-bold">   1502</span>         elem,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   1506</span>         ret,
<span class="ansi-green-intense-fg ansi-bold">   1507</span>     )

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1851</span>, in <span class="ansi-cyan-fg">Connection._execute_context</span><span class="ansi-blue-fg">(self, dialect, constructor, statement, parameters, execution_options, *args, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">   1848</span>             branched.close()
<span class="ansi-green-intense-fg ansi-bold">   1850</span> except BaseException as e:
<span class="ansi-green-fg">-&gt; 1851</span>     self._handle_dbapi_exception(
<span class="ansi-green-intense-fg ansi-bold">   1852</span>         e, statement, parameters, cursor, context
<span class="ansi-green-intense-fg ansi-bold">   1853</span>     )
<span class="ansi-green-intense-fg ansi-bold">   1855</span> return result

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:2032</span>, in <span class="ansi-cyan-fg">Connection._handle_dbapi_exception</span><span class="ansi-blue-fg">(self, e, statement, parameters, cursor, context)</span>
<span class="ansi-green-intense-fg ansi-bold">   2030</span>     util.raise_(newraise, with_traceback=exc_info[2], from_=e)
<span class="ansi-green-intense-fg ansi-bold">   2031</span> elif should_wrap:
<span class="ansi-green-fg">-&gt; 2032</span>     util.raise_(
<span class="ansi-green-intense-fg ansi-bold">   2033</span>         sqlalchemy_exception, with_traceback=exc_info[2], from_=e
<span class="ansi-green-intense-fg ansi-bold">   2034</span>     )
<span class="ansi-green-intense-fg ansi-bold">   2035</span> else:
<span class="ansi-green-intense-fg ansi-bold">   2036</span>     util.raise_(exc_info[1], with_traceback=exc_info[2])

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/util/compat.py:207</span>, in <span class="ansi-cyan-fg">raise_</span><span class="ansi-blue-fg">(***failed resolving arguments***)</span>
<span class="ansi-green-intense-fg ansi-bold">    204</span>     exception.__cause__ = replace_context
<span class="ansi-green-intense-fg ansi-bold">    206</span> try:
<span class="ansi-green-fg">--&gt; 207</span>     raise exception
<span class="ansi-green-intense-fg ansi-bold">    208</span> finally:
<span class="ansi-green-intense-fg ansi-bold">    209</span>     # credit to
<span class="ansi-green-intense-fg ansi-bold">    210</span>     # https://cosmicpercolator.com/2016/01/13/exception-leaks-in-python-2-and-3/
<span class="ansi-green-intense-fg ansi-bold">    211</span>     # as the __traceback__ object creates a cycle
<span class="ansi-green-intense-fg ansi-bold">    212</span>     del exception, replace_context, from_, with_traceback

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1808</span>, in <span class="ansi-cyan-fg">Connection._execute_context</span><span class="ansi-blue-fg">(self, dialect, constructor, statement, parameters, execution_options, *args, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">   1806</span>                 break
<span class="ansi-green-intense-fg ansi-bold">   1807</span>     if not evt_handled:
<span class="ansi-green-fg">-&gt; 1808</span>         self.dialect.do_execute(
<span class="ansi-green-intense-fg ansi-bold">   1809</span>             cursor, statement, parameters, context
<span class="ansi-green-intense-fg ansi-bold">   1810</span>         )
<span class="ansi-green-intense-fg ansi-bold">   1812</span> if self._has_events or self.engine._has_events:
<span class="ansi-green-intense-fg ansi-bold">   1813</span>     self.dispatch.after_cursor_execute(
<span class="ansi-green-intense-fg ansi-bold">   1814</span>         self,
<span class="ansi-green-intense-fg ansi-bold">   1815</span>         cursor,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   1819</span>         context.executemany,
<span class="ansi-green-intense-fg ansi-bold">   1820</span>     )

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/default.py:732</span>, in <span class="ansi-cyan-fg">DefaultDialect.do_execute</span><span class="ansi-blue-fg">(self, cursor, statement, parameters, context)</span>
<span class="ansi-green-intense-fg ansi-bold">    731</span> def do_execute(self, cursor, statement, parameters, context=None):
<span class="ansi-green-fg">--&gt; 732</span>     cursor.execute(statement, parameters)

<span class="ansi-red-fg">OperationalError</span>: (sqlite3.OperationalError) no such table: MLB
[SQL: SELECT "MLB".id AS "MLB_id", "MLB"._name AS "MLB__name", "MLB"._uid AS "MLB__uid", "MLB"._position AS "MLB__position", "MLB"._team AS "MLB__team", "MLB"._number AS "MLB__number" 
FROM "MLB" 
WHERE "MLB"._uid = ?
 LIMIT ? OFFSET ?]
[parameters: ('Mu59rove', 1, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Here we create a user by prompting them to enter their name, ID, a date of birth, and a password. It is then stored in the database, and the user can read whatever output is given.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Reading-users-table-in-sqlite.db">
<a class="anchor" href="#Reading-users-table-in-sqlite.db" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reading users table in sqlite.db<a class="anchor-link" href="#Reading-users-table-in-sqlite.db"> </a>
</h2>
<blockquote>
<p>Uses SQLALchemy query.all method to read data</p>
</blockquote>
<ul>
<li>Comment on purpose of following<ol>
<li>User.query.all</li>
<li>json_ready assignment, google List Comprehension</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># SQLAlchemy extracts all users from database, turns each user into JSON</span>
<span class="k">def</span> <span class="nf">read</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">MLB</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">json_ready</span> <span class="o">=</span> <span class="p">[</span><span class="n">user</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">table</span><span class="p">]</span> <span class="c1"># "List Comprehensions", for each user add user.read() to list</span>
    <span class="k">return</span> <span class="n">json_ready</span>

<span class="n">read</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">OperationalError</span>                          Traceback (most recent call last)
File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1808</span>, in <span class="ansi-cyan-fg">Connection._execute_context</span><span class="ansi-blue-fg">(self, dialect, constructor, statement, parameters, execution_options, *args, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">   1807</span>     if not evt_handled:
<span class="ansi-green-fg">-&gt; 1808</span>         self.dialect.do_execute(
<span class="ansi-green-intense-fg ansi-bold">   1809</span>             cursor, statement, parameters, context
<span class="ansi-green-intense-fg ansi-bold">   1810</span>         )
<span class="ansi-green-intense-fg ansi-bold">   1812</span> if self._has_events or self.engine._has_events:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/default.py:732</span>, in <span class="ansi-cyan-fg">DefaultDialect.do_execute</span><span class="ansi-blue-fg">(self, cursor, statement, parameters, context)</span>
<span class="ansi-green-intense-fg ansi-bold">    731</span> def do_execute(self, cursor, statement, parameters, context=None):
<span class="ansi-green-fg">--&gt; 732</span>     cursor.execute(statement, parameters)

<span class="ansi-red-fg">OperationalError</span>: no such table: MLB

The above exception was the direct cause of the following exception:

<span class="ansi-red-fg">OperationalError</span>                          Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb Cell 19</span> in <span class="ansi-cyan-fg">&lt;cell line: 8&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X24sdnNjb2RlLXJlbW90ZQ%3D%3D?line=4'&gt;5&lt;/a&gt;</span>     json_ready = [user.read() for user in table] # "List Comprehensions", for each user add user.read() to list
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X24sdnNjb2RlLXJlbW90ZQ%3D%3D?line=5'&gt;6&lt;/a&gt;</span>     return json_ready
<span class="ansi-green-fg">----&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X24sdnNjb2RlLXJlbW90ZQ%3D%3D?line=7'&gt;8&lt;/a&gt;</span> read()

<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb Cell 19</span> in <span class="ansi-cyan-fg">read</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X24sdnNjb2RlLXJlbW90ZQ%3D%3D?line=1'&gt;2&lt;/a&gt;</span> def read():
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X24sdnNjb2RlLXJlbW90ZQ%3D%3D?line=2'&gt;3&lt;/a&gt;</span>     with app.app_context():
<span class="ansi-green-fg">----&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X24sdnNjb2RlLXJlbW90ZQ%3D%3D?line=3'&gt;4&lt;/a&gt;</span>         table = MLB.query.all()
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X24sdnNjb2RlLXJlbW90ZQ%3D%3D?line=4'&gt;5&lt;/a&gt;</span>     json_ready = [user.read() for user in table] # "List Comprehensions", for each user add user.read() to list
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X24sdnNjb2RlLXJlbW90ZQ%3D%3D?line=5'&gt;6&lt;/a&gt;</span>     return json_ready

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/query.py:2759</span>, in <span class="ansi-cyan-fg">Query.all</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   2743</span> def all(self):
<span class="ansi-green-intense-fg ansi-bold">   2744</span>     """Return the results represented by this :class:`_query.Query`
<span class="ansi-green-intense-fg ansi-bold">   2745</span>     as a list.
<span class="ansi-green-intense-fg ansi-bold">   2746</span> 
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   2757</span>             :ref:`faq_query_deduplicating`
<span class="ansi-green-intense-fg ansi-bold">   2758</span>     """
<span class="ansi-green-fg">-&gt; 2759</span>     return self._iter().all()

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/query.py:2894</span>, in <span class="ansi-cyan-fg">Query._iter</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   2891</span> params = self._params
<span class="ansi-green-intense-fg ansi-bold">   2893</span> statement = self._statement_20()
<span class="ansi-green-fg">-&gt; 2894</span> result = self.session.execute(
<span class="ansi-green-intense-fg ansi-bold">   2895</span>     statement,
<span class="ansi-green-intense-fg ansi-bold">   2896</span>     params,
<span class="ansi-green-intense-fg ansi-bold">   2897</span>     execution_options={"_sa_orm_load_options": self.load_options},
<span class="ansi-green-intense-fg ansi-bold">   2898</span> )
<span class="ansi-green-intense-fg ansi-bold">   2900</span> # legacy: automatically set scalars, unique
<span class="ansi-green-intense-fg ansi-bold">   2901</span> if result._attributes.get("is_single_entity", False):

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/session.py:1692</span>, in <span class="ansi-cyan-fg">Session.execute</span><span class="ansi-blue-fg">(self, statement, params, execution_options, bind_arguments, _parent_execute_state, _add_event, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">   1690</span> else:
<span class="ansi-green-intense-fg ansi-bold">   1691</span>     conn = self._connection_for_bind(bind)
<span class="ansi-green-fg">-&gt; 1692</span> result = conn._execute_20(statement, params or {}, execution_options)
<span class="ansi-green-intense-fg ansi-bold">   1694</span> if compile_state_cls:
<span class="ansi-green-intense-fg ansi-bold">   1695</span>     result = compile_state_cls.orm_setup_cursor_result(
<span class="ansi-green-intense-fg ansi-bold">   1696</span>         self,
<span class="ansi-green-intense-fg ansi-bold">   1697</span>         statement,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   1701</span>         result,
<span class="ansi-green-intense-fg ansi-bold">   1702</span>     )

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1620</span>, in <span class="ansi-cyan-fg">Connection._execute_20</span><span class="ansi-blue-fg">(self, statement, parameters, execution_options)</span>
<span class="ansi-green-intense-fg ansi-bold">   1616</span>     util.raise_(
<span class="ansi-green-intense-fg ansi-bold">   1617</span>         exc.ObjectNotExecutableError(statement), replace_context=err
<span class="ansi-green-intense-fg ansi-bold">   1618</span>     )
<span class="ansi-green-intense-fg ansi-bold">   1619</span> else:
<span class="ansi-green-fg">-&gt; 1620</span>     return meth(self, args_10style, kwargs_10style, execution_options)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/sql/elements.py:325</span>, in <span class="ansi-cyan-fg">ClauseElement._execute_on_connection</span><span class="ansi-blue-fg">(self, connection, multiparams, params, execution_options, _force)</span>
<span class="ansi-green-intense-fg ansi-bold">    321</span> def _execute_on_connection(
<span class="ansi-green-intense-fg ansi-bold">    322</span>     self, connection, multiparams, params, execution_options, _force=False
<span class="ansi-green-intense-fg ansi-bold">    323</span> ):
<span class="ansi-green-intense-fg ansi-bold">    324</span>     if _force or self.supports_execution:
<span class="ansi-green-fg">--&gt; 325</span>         return connection._execute_clauseelement(
<span class="ansi-green-intense-fg ansi-bold">    326</span>             self, multiparams, params, execution_options
<span class="ansi-green-intense-fg ansi-bold">    327</span>         )
<span class="ansi-green-intense-fg ansi-bold">    328</span>     else:
<span class="ansi-green-intense-fg ansi-bold">    329</span>         raise exc.ObjectNotExecutableError(self)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1487</span>, in <span class="ansi-cyan-fg">Connection._execute_clauseelement</span><span class="ansi-blue-fg">(self, elem, multiparams, params, execution_options)</span>
<span class="ansi-green-intense-fg ansi-bold">   1475</span> compiled_cache = execution_options.get(
<span class="ansi-green-intense-fg ansi-bold">   1476</span>     "compiled_cache", self.engine._compiled_cache
<span class="ansi-green-intense-fg ansi-bold">   1477</span> )
<span class="ansi-green-intense-fg ansi-bold">   1479</span> compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
<span class="ansi-green-intense-fg ansi-bold">   1480</span>     dialect=dialect,
<span class="ansi-green-intense-fg ansi-bold">   1481</span>     compiled_cache=compiled_cache,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   1485</span>     linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
<span class="ansi-green-intense-fg ansi-bold">   1486</span> )
<span class="ansi-green-fg">-&gt; 1487</span> ret = self._execute_context(
<span class="ansi-green-intense-fg ansi-bold">   1488</span>     dialect,
<span class="ansi-green-intense-fg ansi-bold">   1489</span>     dialect.execution_ctx_cls._init_compiled,
<span class="ansi-green-intense-fg ansi-bold">   1490</span>     compiled_sql,
<span class="ansi-green-intense-fg ansi-bold">   1491</span>     distilled_params,
<span class="ansi-green-intense-fg ansi-bold">   1492</span>     execution_options,
<span class="ansi-green-intense-fg ansi-bold">   1493</span>     compiled_sql,
<span class="ansi-green-intense-fg ansi-bold">   1494</span>     distilled_params,
<span class="ansi-green-intense-fg ansi-bold">   1495</span>     elem,
<span class="ansi-green-intense-fg ansi-bold">   1496</span>     extracted_params,
<span class="ansi-green-intense-fg ansi-bold">   1497</span>     cache_hit=cache_hit,
<span class="ansi-green-intense-fg ansi-bold">   1498</span> )
<span class="ansi-green-intense-fg ansi-bold">   1499</span> if has_events:
<span class="ansi-green-intense-fg ansi-bold">   1500</span>     self.dispatch.after_execute(
<span class="ansi-green-intense-fg ansi-bold">   1501</span>         self,
<span class="ansi-green-intense-fg ansi-bold">   1502</span>         elem,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   1506</span>         ret,
<span class="ansi-green-intense-fg ansi-bold">   1507</span>     )

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1851</span>, in <span class="ansi-cyan-fg">Connection._execute_context</span><span class="ansi-blue-fg">(self, dialect, constructor, statement, parameters, execution_options, *args, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">   1848</span>             branched.close()
<span class="ansi-green-intense-fg ansi-bold">   1850</span> except BaseException as e:
<span class="ansi-green-fg">-&gt; 1851</span>     self._handle_dbapi_exception(
<span class="ansi-green-intense-fg ansi-bold">   1852</span>         e, statement, parameters, cursor, context
<span class="ansi-green-intense-fg ansi-bold">   1853</span>     )
<span class="ansi-green-intense-fg ansi-bold">   1855</span> return result

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:2032</span>, in <span class="ansi-cyan-fg">Connection._handle_dbapi_exception</span><span class="ansi-blue-fg">(self, e, statement, parameters, cursor, context)</span>
<span class="ansi-green-intense-fg ansi-bold">   2030</span>     util.raise_(newraise, with_traceback=exc_info[2], from_=e)
<span class="ansi-green-intense-fg ansi-bold">   2031</span> elif should_wrap:
<span class="ansi-green-fg">-&gt; 2032</span>     util.raise_(
<span class="ansi-green-intense-fg ansi-bold">   2033</span>         sqlalchemy_exception, with_traceback=exc_info[2], from_=e
<span class="ansi-green-intense-fg ansi-bold">   2034</span>     )
<span class="ansi-green-intense-fg ansi-bold">   2035</span> else:
<span class="ansi-green-intense-fg ansi-bold">   2036</span>     util.raise_(exc_info[1], with_traceback=exc_info[2])

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/util/compat.py:207</span>, in <span class="ansi-cyan-fg">raise_</span><span class="ansi-blue-fg">(***failed resolving arguments***)</span>
<span class="ansi-green-intense-fg ansi-bold">    204</span>     exception.__cause__ = replace_context
<span class="ansi-green-intense-fg ansi-bold">    206</span> try:
<span class="ansi-green-fg">--&gt; 207</span>     raise exception
<span class="ansi-green-intense-fg ansi-bold">    208</span> finally:
<span class="ansi-green-intense-fg ansi-bold">    209</span>     # credit to
<span class="ansi-green-intense-fg ansi-bold">    210</span>     # https://cosmicpercolator.com/2016/01/13/exception-leaks-in-python-2-and-3/
<span class="ansi-green-intense-fg ansi-bold">    211</span>     # as the __traceback__ object creates a cycle
<span class="ansi-green-intense-fg ansi-bold">    212</span>     del exception, replace_context, from_, with_traceback

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1808</span>, in <span class="ansi-cyan-fg">Connection._execute_context</span><span class="ansi-blue-fg">(self, dialect, constructor, statement, parameters, execution_options, *args, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">   1806</span>                 break
<span class="ansi-green-intense-fg ansi-bold">   1807</span>     if not evt_handled:
<span class="ansi-green-fg">-&gt; 1808</span>         self.dialect.do_execute(
<span class="ansi-green-intense-fg ansi-bold">   1809</span>             cursor, statement, parameters, context
<span class="ansi-green-intense-fg ansi-bold">   1810</span>         )
<span class="ansi-green-intense-fg ansi-bold">   1812</span> if self._has_events or self.engine._has_events:
<span class="ansi-green-intense-fg ansi-bold">   1813</span>     self.dispatch.after_cursor_execute(
<span class="ansi-green-intense-fg ansi-bold">   1814</span>         self,
<span class="ansi-green-intense-fg ansi-bold">   1815</span>         cursor,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   1819</span>         context.executemany,
<span class="ansi-green-intense-fg ansi-bold">   1820</span>     )

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/default.py:732</span>, in <span class="ansi-cyan-fg">DefaultDialect.do_execute</span><span class="ansi-blue-fg">(self, cursor, statement, parameters, context)</span>
<span class="ansi-green-intense-fg ansi-bold">    731</span> def do_execute(self, cursor, statement, parameters, context=None):
<span class="ansi-green-fg">--&gt; 732</span>     cursor.execute(statement, parameters)

<span class="ansi-red-fg">OperationalError</span>: (sqlite3.OperationalError) no such table: MLB
[SQL: SELECT "MLB".id AS "MLB_id", "MLB"._name AS "MLB__name", "MLB"._uid AS "MLB__uid", "MLB"._position AS "MLB__position", "MLB"._team AS "MLB__team", "MLB"._number AS "MLB__number" 
FROM "MLB"]
(Background on this error at: https://sqlalche.me/e/14/e3q8)</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The user can read the name, user ID, password, and date of birth.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Hacks">
<a class="anchor" href="#Hacks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Hacks<a class="anchor-link" href="#Hacks"> </a>
</h1>
<ul>
<li>Add this Blog to you own Blogging site.  In the Blog add notes and observations on each code cell.</li>
<li>Change blog to your own database.</li>
<li>Add additional CRUD<ul>
<li>Add Update functionality to this blog.</li>
<li>Add Delete functionality to this blog.</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">update</span><span class="p">():</span>
    <span class="c1"># optimize user time to see if uid exists</span>
    <span class="n">uid</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter the user ID of your new player here: "</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">find_by_uid</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">user</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"No user id </span><span class="si">{</span><span class="n">uid</span><span class="si">}</span><span class="s2"> found"</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Add your player's name: "</span><span class="p">)</span>
    <span class="n">position</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Add your player's position: "</span><span class="p">)</span>
    <span class="n">team</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"What team does your team play for? "</span><span class="p">)</span>
    <span class="n">number</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"What number does your player wear? "</span><span class="p">)</span>
    
    <span class="c1"># Initialize User object before date</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">MLB</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> 
                <span class="n">uid</span><span class="o">=</span><span class="n">uid</span><span class="p">,</span> 
                <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
                <span class="n">team</span><span class="o">=</span><span class="n">team</span><span class="p">,</span>
                <span class="n">number</span><span class="o">=</span><span class="n">number</span><span class="p">,</span>
                <span class="p">)</span>
    <span class="c1"># write object to database</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">object</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Updated</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nb">object</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">except</span><span class="p">:</span>  <span class="c1"># error raised if object not created</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Unknown error uid </span><span class="si">{uid}</span><span class="s2">"</span><span class="p">)</span>
        
<span class="n">update</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">OperationalError</span>                          Traceback (most recent call last)
File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1808</span>, in <span class="ansi-cyan-fg">Connection._execute_context</span><span class="ansi-blue-fg">(self, dialect, constructor, statement, parameters, execution_options, *args, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">   1807</span>     if not evt_handled:
<span class="ansi-green-fg">-&gt; 1808</span>         self.dialect.do_execute(
<span class="ansi-green-intense-fg ansi-bold">   1809</span>             cursor, statement, parameters, context
<span class="ansi-green-intense-fg ansi-bold">   1810</span>         )
<span class="ansi-green-intense-fg ansi-bold">   1812</span> if self._has_events or self.engine._has_events:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/default.py:732</span>, in <span class="ansi-cyan-fg">DefaultDialect.do_execute</span><span class="ansi-blue-fg">(self, cursor, statement, parameters, context)</span>
<span class="ansi-green-intense-fg ansi-bold">    731</span> def do_execute(self, cursor, statement, parameters, context=None):
<span class="ansi-green-fg">--&gt; 732</span>     cursor.execute(statement, parameters)

<span class="ansi-red-fg">OperationalError</span>: no such table: MLB

The above exception was the direct cause of the following exception:

<span class="ansi-red-fg">OperationalError</span>                          Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb Cell 22</span> in <span class="ansi-cyan-fg">&lt;cell line: 30&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X30sdnNjb2RlLXJlbW90ZQ%3D%3D?line=26'&gt;27&lt;/a&gt;</span>         except:  # error raised if object not created
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X30sdnNjb2RlLXJlbW90ZQ%3D%3D?line=27'&gt;28&lt;/a&gt;</span>             print("Unknown error uid {uid}")
<span class="ansi-green-fg">---&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X30sdnNjb2RlLXJlbW90ZQ%3D%3D?line=29'&gt;30&lt;/a&gt;</span> update()

<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb Cell 22</span> in <span class="ansi-cyan-fg">update</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X30sdnNjb2RlLXJlbW90ZQ%3D%3D?line=0'&gt;1&lt;/a&gt;</span> def update():
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X30sdnNjb2RlLXJlbW90ZQ%3D%3D?line=1'&gt;2&lt;/a&gt;</span>     # optimize user time to see if uid exists
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X30sdnNjb2RlLXJlbW90ZQ%3D%3D?line=2'&gt;3&lt;/a&gt;</span>     uid = input("Enter the user ID of your new player here: ")
<span class="ansi-green-fg">----&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X30sdnNjb2RlLXJlbW90ZQ%3D%3D?line=3'&gt;4&lt;/a&gt;</span>     user = find_by_uid(uid)
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X30sdnNjb2RlLXJlbW90ZQ%3D%3D?line=4'&gt;5&lt;/a&gt;</span>     if user != None:
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X30sdnNjb2RlLXJlbW90ZQ%3D%3D?line=5'&gt;6&lt;/a&gt;</span>         pass

<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb Cell 22</span> in <span class="ansi-cyan-fg">find_by_uid</span><span class="ansi-blue-fg">(uid)</span>
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X30sdnNjb2RlLXJlbW90ZQ%3D%3D?line=1'&gt;2&lt;/a&gt;</span> def find_by_uid(uid):
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X30sdnNjb2RlLXJlbW90ZQ%3D%3D?line=2'&gt;3&lt;/a&gt;</span>     with app.app_context():
<span class="ansi-green-fg">----&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X30sdnNjb2RlLXJlbW90ZQ%3D%3D?line=3'&gt;4&lt;/a&gt;</span>         user = MLB.query.filter_by(_uid=uid).first()
<span class="ansi-green-intense-fg ansi-bold">      &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/rohan/vscode/RohanRepository/_notebooks/2023-3-20-2.4a.ipynb#X30sdnNjb2RlLXJlbW90ZQ%3D%3D?line=4'&gt;5&lt;/a&gt;</span>     return user

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/query.py:2810</span>, in <span class="ansi-cyan-fg">Query.first</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   2808</span>     return self._iter().first()
<span class="ansi-green-intense-fg ansi-bold">   2809</span> else:
<span class="ansi-green-fg">-&gt; 2810</span>     return self.limit(1)._iter().first()

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/query.py:2894</span>, in <span class="ansi-cyan-fg">Query._iter</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   2891</span> params = self._params
<span class="ansi-green-intense-fg ansi-bold">   2893</span> statement = self._statement_20()
<span class="ansi-green-fg">-&gt; 2894</span> result = self.session.execute(
<span class="ansi-green-intense-fg ansi-bold">   2895</span>     statement,
<span class="ansi-green-intense-fg ansi-bold">   2896</span>     params,
<span class="ansi-green-intense-fg ansi-bold">   2897</span>     execution_options={"_sa_orm_load_options": self.load_options},
<span class="ansi-green-intense-fg ansi-bold">   2898</span> )
<span class="ansi-green-intense-fg ansi-bold">   2900</span> # legacy: automatically set scalars, unique
<span class="ansi-green-intense-fg ansi-bold">   2901</span> if result._attributes.get("is_single_entity", False):

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/session.py:1692</span>, in <span class="ansi-cyan-fg">Session.execute</span><span class="ansi-blue-fg">(self, statement, params, execution_options, bind_arguments, _parent_execute_state, _add_event, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">   1690</span> else:
<span class="ansi-green-intense-fg ansi-bold">   1691</span>     conn = self._connection_for_bind(bind)
<span class="ansi-green-fg">-&gt; 1692</span> result = conn._execute_20(statement, params or {}, execution_options)
<span class="ansi-green-intense-fg ansi-bold">   1694</span> if compile_state_cls:
<span class="ansi-green-intense-fg ansi-bold">   1695</span>     result = compile_state_cls.orm_setup_cursor_result(
<span class="ansi-green-intense-fg ansi-bold">   1696</span>         self,
<span class="ansi-green-intense-fg ansi-bold">   1697</span>         statement,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   1701</span>         result,
<span class="ansi-green-intense-fg ansi-bold">   1702</span>     )

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1620</span>, in <span class="ansi-cyan-fg">Connection._execute_20</span><span class="ansi-blue-fg">(self, statement, parameters, execution_options)</span>
<span class="ansi-green-intense-fg ansi-bold">   1616</span>     util.raise_(
<span class="ansi-green-intense-fg ansi-bold">   1617</span>         exc.ObjectNotExecutableError(statement), replace_context=err
<span class="ansi-green-intense-fg ansi-bold">   1618</span>     )
<span class="ansi-green-intense-fg ansi-bold">   1619</span> else:
<span class="ansi-green-fg">-&gt; 1620</span>     return meth(self, args_10style, kwargs_10style, execution_options)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/sql/elements.py:325</span>, in <span class="ansi-cyan-fg">ClauseElement._execute_on_connection</span><span class="ansi-blue-fg">(self, connection, multiparams, params, execution_options, _force)</span>
<span class="ansi-green-intense-fg ansi-bold">    321</span> def _execute_on_connection(
<span class="ansi-green-intense-fg ansi-bold">    322</span>     self, connection, multiparams, params, execution_options, _force=False
<span class="ansi-green-intense-fg ansi-bold">    323</span> ):
<span class="ansi-green-intense-fg ansi-bold">    324</span>     if _force or self.supports_execution:
<span class="ansi-green-fg">--&gt; 325</span>         return connection._execute_clauseelement(
<span class="ansi-green-intense-fg ansi-bold">    326</span>             self, multiparams, params, execution_options
<span class="ansi-green-intense-fg ansi-bold">    327</span>         )
<span class="ansi-green-intense-fg ansi-bold">    328</span>     else:
<span class="ansi-green-intense-fg ansi-bold">    329</span>         raise exc.ObjectNotExecutableError(self)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1487</span>, in <span class="ansi-cyan-fg">Connection._execute_clauseelement</span><span class="ansi-blue-fg">(self, elem, multiparams, params, execution_options)</span>
<span class="ansi-green-intense-fg ansi-bold">   1475</span> compiled_cache = execution_options.get(
<span class="ansi-green-intense-fg ansi-bold">   1476</span>     "compiled_cache", self.engine._compiled_cache
<span class="ansi-green-intense-fg ansi-bold">   1477</span> )
<span class="ansi-green-intense-fg ansi-bold">   1479</span> compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
<span class="ansi-green-intense-fg ansi-bold">   1480</span>     dialect=dialect,
<span class="ansi-green-intense-fg ansi-bold">   1481</span>     compiled_cache=compiled_cache,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   1485</span>     linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
<span class="ansi-green-intense-fg ansi-bold">   1486</span> )
<span class="ansi-green-fg">-&gt; 1487</span> ret = self._execute_context(
<span class="ansi-green-intense-fg ansi-bold">   1488</span>     dialect,
<span class="ansi-green-intense-fg ansi-bold">   1489</span>     dialect.execution_ctx_cls._init_compiled,
<span class="ansi-green-intense-fg ansi-bold">   1490</span>     compiled_sql,
<span class="ansi-green-intense-fg ansi-bold">   1491</span>     distilled_params,
<span class="ansi-green-intense-fg ansi-bold">   1492</span>     execution_options,
<span class="ansi-green-intense-fg ansi-bold">   1493</span>     compiled_sql,
<span class="ansi-green-intense-fg ansi-bold">   1494</span>     distilled_params,
<span class="ansi-green-intense-fg ansi-bold">   1495</span>     elem,
<span class="ansi-green-intense-fg ansi-bold">   1496</span>     extracted_params,
<span class="ansi-green-intense-fg ansi-bold">   1497</span>     cache_hit=cache_hit,
<span class="ansi-green-intense-fg ansi-bold">   1498</span> )
<span class="ansi-green-intense-fg ansi-bold">   1499</span> if has_events:
<span class="ansi-green-intense-fg ansi-bold">   1500</span>     self.dispatch.after_execute(
<span class="ansi-green-intense-fg ansi-bold">   1501</span>         self,
<span class="ansi-green-intense-fg ansi-bold">   1502</span>         elem,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   1506</span>         ret,
<span class="ansi-green-intense-fg ansi-bold">   1507</span>     )

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1851</span>, in <span class="ansi-cyan-fg">Connection._execute_context</span><span class="ansi-blue-fg">(self, dialect, constructor, statement, parameters, execution_options, *args, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">   1848</span>             branched.close()
<span class="ansi-green-intense-fg ansi-bold">   1850</span> except BaseException as e:
<span class="ansi-green-fg">-&gt; 1851</span>     self._handle_dbapi_exception(
<span class="ansi-green-intense-fg ansi-bold">   1852</span>         e, statement, parameters, cursor, context
<span class="ansi-green-intense-fg ansi-bold">   1853</span>     )
<span class="ansi-green-intense-fg ansi-bold">   1855</span> return result

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:2032</span>, in <span class="ansi-cyan-fg">Connection._handle_dbapi_exception</span><span class="ansi-blue-fg">(self, e, statement, parameters, cursor, context)</span>
<span class="ansi-green-intense-fg ansi-bold">   2030</span>     util.raise_(newraise, with_traceback=exc_info[2], from_=e)
<span class="ansi-green-intense-fg ansi-bold">   2031</span> elif should_wrap:
<span class="ansi-green-fg">-&gt; 2032</span>     util.raise_(
<span class="ansi-green-intense-fg ansi-bold">   2033</span>         sqlalchemy_exception, with_traceback=exc_info[2], from_=e
<span class="ansi-green-intense-fg ansi-bold">   2034</span>     )
<span class="ansi-green-intense-fg ansi-bold">   2035</span> else:
<span class="ansi-green-intense-fg ansi-bold">   2036</span>     util.raise_(exc_info[1], with_traceback=exc_info[2])

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/util/compat.py:207</span>, in <span class="ansi-cyan-fg">raise_</span><span class="ansi-blue-fg">(***failed resolving arguments***)</span>
<span class="ansi-green-intense-fg ansi-bold">    204</span>     exception.__cause__ = replace_context
<span class="ansi-green-intense-fg ansi-bold">    206</span> try:
<span class="ansi-green-fg">--&gt; 207</span>     raise exception
<span class="ansi-green-intense-fg ansi-bold">    208</span> finally:
<span class="ansi-green-intense-fg ansi-bold">    209</span>     # credit to
<span class="ansi-green-intense-fg ansi-bold">    210</span>     # https://cosmicpercolator.com/2016/01/13/exception-leaks-in-python-2-and-3/
<span class="ansi-green-intense-fg ansi-bold">    211</span>     # as the __traceback__ object creates a cycle
<span class="ansi-green-intense-fg ansi-bold">    212</span>     del exception, replace_context, from_, with_traceback

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1808</span>, in <span class="ansi-cyan-fg">Connection._execute_context</span><span class="ansi-blue-fg">(self, dialect, constructor, statement, parameters, execution_options, *args, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">   1806</span>                 break
<span class="ansi-green-intense-fg ansi-bold">   1807</span>     if not evt_handled:
<span class="ansi-green-fg">-&gt; 1808</span>         self.dialect.do_execute(
<span class="ansi-green-intense-fg ansi-bold">   1809</span>             cursor, statement, parameters, context
<span class="ansi-green-intense-fg ansi-bold">   1810</span>         )
<span class="ansi-green-intense-fg ansi-bold">   1812</span> if self._has_events or self.engine._has_events:
<span class="ansi-green-intense-fg ansi-bold">   1813</span>     self.dispatch.after_cursor_execute(
<span class="ansi-green-intense-fg ansi-bold">   1814</span>         self,
<span class="ansi-green-intense-fg ansi-bold">   1815</span>         cursor,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   1819</span>         context.executemany,
<span class="ansi-green-intense-fg ansi-bold">   1820</span>     )

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/default.py:732</span>, in <span class="ansi-cyan-fg">DefaultDialect.do_execute</span><span class="ansi-blue-fg">(self, cursor, statement, parameters, context)</span>
<span class="ansi-green-intense-fg ansi-bold">    731</span> def do_execute(self, cursor, statement, parameters, context=None):
<span class="ansi-green-fg">--&gt; 732</span>     cursor.execute(statement, parameters)

<span class="ansi-red-fg">OperationalError</span>: (sqlite3.OperationalError) no such table: MLB
[SQL: SELECT "MLB".id AS "MLB_id", "MLB"._name AS "MLB__name", "MLB"._uid AS "MLB__uid", "MLB"._position AS "MLB__position", "MLB"._team AS "MLB__team", "MLB"._number AS "MLB__number" 
FROM "MLB" 
WHERE "MLB"._uid = ?
 LIMIT ? OFFSET ?]
[parameters: ('Mu59grove', 1, 0)]
(Background on this error at: https://sqlalche.me/e/14/e3q8)</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">sqlite3</span>

<span class="n">database</span> <span class="o">=</span> <span class="s1">'instance/sqlite.db'</span> <span class="c1"># this is location of database</span>

<span class="k">def</span> <span class="nf">delete</span><span class="p">():</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Which player (user ID) do you want to remove? "</span><span class="p">)</span>

    <span class="c1"># Connect to the database file</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">database</span><span class="p">)</span>

    <span class="c1"># Create a cursor object to execute SQL commands</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"DELETE FROM player WHERE id = ?"</span><span class="p">,</span> <span class="p">(</span><span class="nb">id</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">cursor</span><span class="o">.</span><span class="n">rowcount</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># The id was not found in the table</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"No id </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> was not found in the table"</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># The id was found in the table and the row was deleted</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"The row with id </span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2"> was successfully deleted"</span><span class="p">)</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">Error</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Error while executing the DELETE:"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        
<span class="n">delete</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Error while executing the DELETE: no such table: MLB
</pre>
</div>
</div>

</div>
</div>

</div>
    

</div>



  </div><a class="u-url" href="/RohanRepository/2023/03/19/.4a.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/RohanRepository/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="https://rohanagr.github.io/RohanRepository/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/RohanRepository/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>An easy to use blogging platform with support for Jupyter Notebooks.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>
